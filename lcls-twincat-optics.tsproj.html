
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PLC Project (1): lcls_twincat_optics_plc &#8212; pcdshub/lcls-twincat-optics  documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="lcls_twincat_optics_plc.tmc" href="lcls_twincat_optics_plc.tmc.html" />
    <link rel="prev" title="Welcome to pcdshub/lcls-twincat-optics’s documentation!" href="index.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="plc-project-1-lcls-twincat-optics-plc">
<h1>PLC Project (1): lcls_twincat_optics_plc<a class="headerlink" href="#plc-project-1-lcls-twincat-optics-plc" title="Permalink to this headline">¶</a></h1>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Project</span> <span class="n">root</span><span class="p">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">travis</span><span class="o">/</span><span class="n">build</span><span class="o">/</span><span class="n">pcdshub</span><span class="o">/</span><span class="n">lcls</span><span class="o">-</span><span class="n">twincat</span><span class="o">-</span><span class="n">optics</span><span class="o">/</span><span class="n">lcls</span><span class="o">-</span><span class="n">twincat</span><span class="o">-</span><span class="n">optics</span>
<span class="n">Project</span> <span class="n">path</span><span class="p">:</span> <span class="n">lcls_twincat_optics_plc</span><span class="o">/</span><span class="n">lcls_twincat_optics_plc</span><span class="o">.</span><span class="n">plcproj</span>
<span class="n">TMC</span> <span class="n">path</span><span class="p">:</span>     <span class="n">lcls_twincat_optics_plc</span><span class="o">/</span><span class="n">lcls_twincat_optics_plc</span><span class="o">.</span><span class="n">tmc</span>
<span class="n">AMS</span> <span class="n">ID</span><span class="p">:</span>       <span class="mf">172.21</span><span class="o">.</span><span class="mf">148.227</span><span class="o">.</span><span class="mf">1.1</span>
<span class="n">IP</span> <span class="n">Address</span><span class="p">:</span>   <span class="mf">172.21</span><span class="o">.</span><span class="mf">148.227</span> <span class="p">(</span><span class="o">*</span> <span class="n">based</span> <span class="n">on</span> <span class="n">AMS</span> <span class="n">ID</span><span class="p">)</span>
<span class="n">Port</span><span class="p">:</span>         <span class="mi">851</span>

<span class="n">Source</span> <span class="n">files</span><span class="p">:</span>
    <span class="mf">1.</span><span class="p">)</span> <span class="n">lcls_twincat_optics_plc</span><span class="o">/</span><span class="n">DUTs</span><span class="o">/</span><span class="n">DUT_HOMS</span><span class="o">.</span><span class="n">TcDUT</span>
    <span class="mf">2.</span><span class="p">)</span> <span class="n">lcls_twincat_optics_plc</span><span class="o">/</span><span class="n">DUTs</span><span class="o">/</span><span class="n">E_PiezoControl</span><span class="o">.</span><span class="n">TcDUT</span>
    <span class="mf">3.</span><span class="p">)</span> <span class="n">lcls_twincat_optics_plc</span><span class="o">/</span><span class="n">DUTs</span><span class="o">/</span><span class="n">E_PitchControl</span><span class="o">.</span><span class="n">TcDUT</span>
    <span class="mf">4.</span><span class="p">)</span> <span class="n">lcls_twincat_optics_plc</span><span class="o">/</span><span class="n">DUTs</span><span class="o">/</span><span class="n">HOMS_PitchMechanism</span><span class="o">.</span><span class="n">TcDUT</span>
    <span class="mf">5.</span><span class="p">)</span> <span class="n">lcls_twincat_optics_plc</span><span class="o">/</span><span class="n">DUTs</span><span class="o">/</span><span class="n">ST_PiezoAxis</span><span class="o">.</span><span class="n">TcDUT</span>
    <span class="mf">6.</span><span class="p">)</span> <span class="n">lcls_twincat_optics_plc</span><span class="o">/</span><span class="n">GVLs</span><span class="o">/</span><span class="n">GVL_Constants</span><span class="o">.</span><span class="n">TcGVL</span>
    <span class="mf">7.</span><span class="p">)</span> <span class="n">lcls_twincat_optics_plc</span><span class="o">/</span><span class="n">GVLs</span><span class="o">/</span><span class="n">GVL_TestStructs</span><span class="o">.</span><span class="n">TcGVL</span>
    <span class="mf">8.</span><span class="p">)</span> <span class="n">lcls_twincat_optics_plc</span><span class="o">/</span><span class="n">PlcTask</span><span class="o">.</span><span class="n">TcTTO</span>
    <span class="mf">9.</span><span class="p">)</span> <span class="n">lcls_twincat_optics_plc</span><span class="o">/</span><span class="n">POUs</span><span class="o">/</span><span class="n">FB_Bender</span><span class="o">.</span><span class="n">TcPOU</span>
    <span class="mf">10.</span><span class="p">)</span> <span class="n">lcls_twincat_optics_plc</span><span class="o">/</span><span class="n">POUs</span><span class="o">/</span><span class="n">FB_PiezoControl</span><span class="o">.</span><span class="n">TcPOU</span>
    <span class="mf">11.</span><span class="p">)</span> <span class="n">lcls_twincat_optics_plc</span><span class="o">/</span><span class="n">POUs</span><span class="o">/</span><span class="n">FB_PitchControl</span><span class="o">.</span><span class="n">TcPOU</span>
    <span class="mf">12.</span><span class="p">)</span> <span class="n">lcls_twincat_optics_plc</span><span class="o">/</span><span class="n">POUs</span><span class="o">/</span><span class="n">FB_RMSWatch</span><span class="o">.</span><span class="n">TcPOU</span>
    <span class="mf">13.</span><span class="p">)</span> <span class="n">lcls_twincat_optics_plc</span><span class="o">/</span><span class="n">POUs</span><span class="o">/</span><span class="n">FB_RunHOMS</span><span class="o">.</span><span class="n">TcPOU</span>
    <span class="mf">14.</span><span class="p">)</span> <span class="n">lcls_twincat_optics_plc</span><span class="o">/</span><span class="n">POUs</span><span class="o">/</span><span class="n">Helpers</span><span class="o">/</span><span class="n">FB_PI_E621_SerialDriver</span><span class="o">.</span><span class="n">TcPOU</span>
    <span class="mf">15.</span><span class="p">)</span> <span class="n">lcls_twincat_optics_plc</span><span class="o">/</span><span class="n">POUs</span><span class="o">/</span><span class="n">Helpers</span><span class="o">/</span><span class="n">FB_PI_E621_SerialTransaction</span><span class="o">.</span><span class="n">TcPOU</span>
    <span class="mf">16.</span><span class="p">)</span> <span class="n">lcls_twincat_optics_plc</span><span class="o">/</span><span class="n">POUs</span><span class="o">/</span><span class="n">Helpers</span><span class="o">/</span><span class="n">MC_SmoothMover</span><span class="o">.</span><span class="n">TcPOU</span>
    <span class="mf">17.</span><span class="p">)</span> <span class="n">lcls_twincat_optics_plc</span><span class="o">/</span><span class="n">POUs</span><span class="o">/</span><span class="n">Helpers</span><span class="o">/</span><span class="n">WithinRange</span><span class="o">.</span><span class="n">TcPOU</span>
    <span class="mf">18.</span><span class="p">)</span> <span class="n">lcls_twincat_optics_plc</span><span class="o">/</span><span class="n">POUs</span><span class="o">/</span><span class="n">Main</span><span class="o">.</span><span class="n">TcPOU</span>
    <span class="mf">19.</span><span class="p">)</span> <span class="n">lcls_twincat_optics_plc</span><span class="o">/</span><span class="n">POUs</span><span class="o">/</span><span class="n">Tests</span><span class="o">/</span><span class="n">TEST_PitchControl</span><span class="o">.</span><span class="n">TcPOU</span>
    <span class="mf">20.</span><span class="p">)</span> <span class="n">lcls_twincat_optics_plc</span><span class="o">/</span><span class="n">Version</span><span class="o">/</span><span class="n">Global_Version</span><span class="o">.</span><span class="n">TcGVL</span>

<span class="n">POUs</span><span class="p">:</span>
    <span class="mf">1.</span><span class="p">)</span> <span class="n">FB_Bender</span>
    <span class="mf">2.</span><span class="p">)</span> <span class="n">FB_PI_E621_SerialDriver</span>
    <span class="mf">3.</span><span class="p">)</span> <span class="n">FB_PI_E621_SerialTransaction</span>
    <span class="mf">4.</span><span class="p">)</span> <span class="n">FB_PiezoControl</span>
    <span class="mf">5.</span><span class="p">)</span> <span class="n">FB_PitchControl</span>
    <span class="mf">6.</span><span class="p">)</span> <span class="n">FB_RMSWatch</span>
    <span class="mf">7.</span><span class="p">)</span> <span class="n">FB_RunHOMS</span>
    <span class="mf">8.</span><span class="p">)</span> <span class="n">MC_SmoothMover</span>
    <span class="mf">9.</span><span class="p">)</span> <span class="n">Main</span>
    <span class="mf">10.</span><span class="p">)</span> <span class="n">TEST_PitchControl</span>
    <span class="mf">11.</span><span class="p">)</span> <span class="n">WithinRange</span>

<span class="n">GVLs</span><span class="p">:</span>
    <span class="mf">1.</span><span class="p">)</span> <span class="n">GVL_Constants</span>
    <span class="mf">2.</span><span class="p">)</span> <span class="n">GVL_TestStructs</span>
    <span class="mf">3.</span><span class="p">)</span> <span class="n">Global_Version</span>
</pre></div>
</div>
<div class="section" id="dut-dut-homs">
<h2>DUT: DUT_HOMS<a class="headerlink" href="#dut-dut-homs" title="Permalink to this headline">¶</a></h2>
<p>File: lcls_twincat_optics_plc/DUTs/DUT_HOMS.TcDUT</p>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span>TYPE DUT_HOMS :
STRUCT
	// System initializiation
	fbRunHOMS : FB_RunHOMS;

	// Couple/Decouple motors
	{attribute &#39;pytmc&#39; := &#39;
		pv: COUPLE_Y
		io: o
	&#39;}
	bExecuteCoupleY : BOOL;
	{attribute &#39;pytmc&#39; := &#39;
		pv: DECOUPLE_Y
		io: o
	&#39;}
	bExecuteDecoupleY : BOOL;
	{attribute &#39;pytmc&#39; := &#39;
		pv: COUPLE_X
		io: o
	&#39;}
	bExecuteCoupleX : BOOL;
	{attribute &#39;pytmc&#39; := &#39;
		pv: DECOUPLE_X
		io: o
	&#39;}
	bExecuteDecoupleX : BOOL;

	// Coupling status
	{attribute &#39;pytmc&#39; := &#39;
		pv: ALREADY_COUPLED_Y
		io: i
	&#39;}
	bGantryAlreadyCoupledY : BOOL;
	{attribute &#39;pytmc&#39; := &#39;
		pv: ALREADY_COUPLED_X
		io: i
	&#39;}
	bGantryAlreadyCoupledX : BOOL;

	// Current gantry differences
	nCurrGantryY : LINT; // encoder counts = nm
	nCurrGantryX : LINT; // encoder counts = nm

	// Convert gantry differences to um (smaller number) to readout in epics
	{attribute &#39;pytmc&#39; := &#39;
		pv: GANTRY_Y
		field: EGU um
		io: i
	&#39;}
	fCurrGantryY_um : REAL; // Y Gantry difference in um
	{attribute &#39;pytmc&#39; := &#39;
		pv: GANTRY_X
		field: EGU um
		io: i
	&#39;}
	fCurrGantryX_um : REAL; // X Gantry difference in um
END_STRUCT
END_TYPE
</pre></div>
</div>
</div>
<div class="section" id="dut-e-piezocontrol">
<h2>DUT: E_PiezoControl<a class="headerlink" href="#dut-e-piezocontrol" title="Permalink to this headline">¶</a></h2>
<p>File: lcls_twincat_optics_plc/DUTs/E_PiezoControl.TcDUT</p>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span><span class="k">TYPE</span> <span class="n">E_PiezoControl</span> <span class="o">:</span>
<span class="p">(</span>
	<span class="o">//</span><span class="n">Piezo</span> <span class="n">Control</span> <span class="n">Machine</span>
	<span class="n">EPC_Idle</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">EPC_Init</span> <span class="o">:=</span> <span class="mi">10</span><span class="p">,</span>
	<span class="n">EPC_MoveRequested</span>  <span class="o">:=</span> <span class="mi">50</span><span class="p">,</span>
	<span class="n">EPC_MovingPositive</span> <span class="o">:=</span> <span class="mi">100</span><span class="p">,</span>
	<span class="n">EPC_MovingNegative</span> <span class="o">:=</span> <span class="mi">200</span><span class="p">,</span>
	<span class="n">EPC_MoveCompleted</span>  <span class="o">:=</span> <span class="mi">350</span><span class="p">,</span>
	<span class="n">EPC_Error</span> <span class="o">:=</span> <span class="mi">500</span>
<span class="p">);</span>
<span class="n">END_TYPE</span>
</pre></div>
</div>
</div>
<div class="section" id="dut-e-pitchcontrol">
<h2>DUT: E_PitchControl<a class="headerlink" href="#dut-e-pitchcontrol" title="Permalink to this headline">¶</a></h2>
<p>File: lcls_twincat_optics_plc/DUTs/E_PitchControl.TcDUT</p>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span><span class="k">TYPE</span> <span class="n">E_PitchControl</span> <span class="o">:</span>
<span class="p">(</span>
	<span class="o">//</span><span class="n">Pitch</span> <span class="n">Control</span> <span class="n">Machine</span>
	<span class="n">PCM_Init</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">PCM_Standby</span> <span class="o">:=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">PCM_MoveRequested</span> <span class="o">:=</span> <span class="mi">10</span><span class="p">,</span>
	<span class="n">PCM_Coarse50Piezo</span>	<span class="o">:=</span> <span class="mi">20</span><span class="p">,</span>
	<span class="n">PCM_CoarseMove</span>	<span class="o">:=</span> <span class="mi">21</span><span class="p">,</span>
	<span class="n">PCM_CoarseMoveCleanup</span> <span class="o">:=</span> <span class="mi">22</span><span class="p">,</span>
	<span class="n">PCM_FineMove</span>	<span class="o">:=</span> <span class="mi">30</span><span class="p">,</span>
	<span class="n">PCM_Halt</span>		<span class="o">:=</span> <span class="mi">50</span><span class="p">,</span>
	<span class="n">PCM_Done</span>	<span class="o">:=</span> <span class="mi">8000</span><span class="p">,</span> <span class="o">//</span><span class="n">why</span> <span class="k">is</span> <span class="mi">8000</span> <span class="n">done</span><span class="o">?</span> <span class="n">Where</span> <span class="n">did</span> <span class="n">this</span> <span class="n">come</span> <span class="n">from</span><span class="o">??</span>
	<span class="n">PCM_Error</span>   <span class="o">:=</span> <span class="mi">9000</span><span class="p">,</span> <span class="o">//</span><span class="n">Anything</span> <span class="n">above</span> <span class="mi">9000</span> <span class="k">is</span> <span class="n">considered</span> <span class="n">an</span> <span class="n">error</span>
	<span class="n">PCM_StepperError</span>	<span class="o">:=</span> <span class="mi">9100</span><span class="p">,</span>
	<span class="n">PCM_PiezoError</span>	<span class="o">:=</span> <span class="mi">9200</span><span class="p">,</span>
	<span class="n">PCM_OtherError</span> <span class="o">:=</span> <span class="mi">9300</span><span class="p">,</span>
	<span class="n">PCM_STOHit</span> <span class="o">:=</span> <span class="mi">9400</span>
<span class="p">);</span>
<span class="n">END_TYPE</span>
</pre></div>
</div>
</div>
<div class="section" id="dut-homs-pitchmechanism">
<h2>DUT: HOMS_PitchMechanism<a class="headerlink" href="#dut-homs-pitchmechanism" title="Permalink to this headline">¶</a></h2>
<p>File: lcls_twincat_optics_plc/DUTs/HOMS_PitchMechanism.TcDUT</p>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span><span class="k">TYPE</span> <span class="n">HOMS_PitchMechanism</span> <span class="o">:</span>
<span class="n">STRUCT</span>
	<span class="n">Piezo</span>	<span class="o">:</span>	<span class="n">ST_PiezoAxis</span><span class="p">;</span>	<span class="o">//</span><span class="n">Piezo</span>

	<span class="p">(</span><span class="o">*</span> <span class="n">Soft</span> <span class="n">limits</span><span class="p">,</span> <span class="n">egu</span> <span class="n">urad</span> <span class="o">*</span><span class="p">)</span>
	<span class="n">ReqPosLimHi</span>	<span class="o">:</span>	<span class="n">REAL</span><span class="p">;</span>
	<span class="n">ReqPosLimLo</span>	<span class="o">:</span>	<span class="n">REAL</span><span class="p">;</span>


	<span class="p">(</span><span class="o">*</span> <span class="n">Hard</span> <span class="n">limits</span><span class="p">,</span> <span class="n">egu</span> <span class="n">INC</span> <span class="o">*</span><span class="p">)</span>
	<span class="p">(</span><span class="o">*</span> <span class="n">These</span> <span class="n">are</span> <span class="n">discovered</span> <span class="n">during</span> <span class="n">installation</span><span class="p">,</span> <span class="k">and</span> <span class="n">represent</span> <span class="n">encoder</span> <span class="n">ticks</span><span class="p">,</span> <span class="n">unbiased</span> <span class="o">*</span><span class="p">)</span>
	<span class="p">(</span><span class="o">*</span> <span class="n">We</span> <span class="n">changed</span> <span class="k">to</span> <span class="n">these</span> <span class="k">when</span> <span class="n">our</span> <span class="n">pitch</span> <span class="n">mechanism</span> <span class="n">limit</span> <span class="n">switches</span> <span class="n">were</span> <span class="n">insufficient</span> <span class="k">for</span>
	<span class="n">good</span> <span class="n">control</span><span class="p">.</span> <span class="n">They</span> <span class="n">had</span> <span class="n">too</span> <span class="n">much</span> <span class="n">hysteresis</span><span class="o">/</span> <span class="n">lack</span> <span class="k">of</span> <span class="n">precision</span><span class="p">.</span> <span class="n">At</span> <span class="n">this</span> <span class="n">point</span> <span class="n">the</span> <span class="n">limit</span>
	<span class="n">switches</span> <span class="n">are</span> <span class="n">ignored</span><span class="p">,</span> <span class="k">and</span> <span class="n">instead</span> <span class="n">their</span> <span class="k">function</span> <span class="k">is</span> <span class="n">carried</span> <span class="k">out</span> <span class="n">by</span> <span class="n">these</span><span class="p">.</span> <span class="o">*</span><span class="p">)</span>
	<span class="n">diEncPosLimHi</span>	<span class="o">:</span>	<span class="n">LINT</span><span class="p">;</span>
	<span class="n">diEncPosLimLo</span>	<span class="o">:</span>	<span class="n">LINT</span><span class="p">;</span>
	<span class="o">//</span><span class="n">Raw</span> <span class="n">encoder</span> <span class="n">count</span>
	<span class="n">diEncCnt</span>	<span class="n">AT</span> <span class="o">%</span><span class="n">I</span><span class="o">*</span>	<span class="o">:</span>	<span class="n">LINT</span><span class="p">;</span>
<span class="n">END_STRUCT</span>
<span class="n">END_TYPE</span>
</pre></div>
</div>
</div>
<div class="section" id="dut-st-piezoaxis">
<h2>DUT: ST_PiezoAxis<a class="headerlink" href="#dut-st-piezoaxis" title="Permalink to this headline">¶</a></h2>
<p>File: lcls_twincat_optics_plc/DUTs/ST_PiezoAxis.TcDUT</p>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span>TYPE ST_PiezoAxis :
STRUCT
	(* IO *)
		//Readback
		sIdn				:	STRING; //Identity
		iCurError			:	INT; //Current error code, should be 0 most of the time
		iLastError			:	INT; //Last error code, for history
		rActVoltage			:	REAL; //Actual voltage
		rLastReqVoltage		:	REAL; //Last requested piezo voltage
		//Control
		rSetVoltage			:	REAL; //this parameter is set by the control loop/ voltage mode
		sAxis				:   STRING :=&#39;A&#39;; //Axis, e.g. A, B, C...A if single unit	
		//Summaries
		xTimeout	:	BOOL;
		xDriverError		:	BOOL; //Summary of any driver errors
	
	(* Operation *)
		xEnable	:	BOOL; //Enable control.
		(* Note: Voltage mode and Idle mode overrides &quot;DirectPiezoMode&quot; of FB_PitchControl *)
		xVoltageMode	:	BOOL; //Voltage mode gives direct access to piezo voltage, false means closed loop position acquisition (see FB_PitchControl for piezo and stepper separation)
		xIdleMode	:	BOOL; //Use to put the piezo at half-stroke
		rReqVoltage : REAL; //Requested piezo voltage in voltage mode
		rReqAbsPos	:	LREAL; //Requested Position, latched at rising StartAbsMov
		xStop	:	BOOL;	//Stops piezo and holds position
	
	
	(* Control Parameters *)
		rActPos	:	LREAL; //Encoder Readback
		//Pitch piezo dmove range (urad)
		rPiezoDmovRange		:	REAL := 1.0;
		stPIParams	:	ST_CTRL_PI_PARAMS := (
			tCtrlCycleTime := T#0MS,
			tTaskCycleTime := T#0MS,
			tTn       := T#200MS,
			fKp      := 0.0005,
			fOutMaxLimit := 1,
			fOutMinLimit := -1,
			bARWOnIPartOnly := FALSE);

	(* Voltage ranges, come from specifications of the driver *)
		UpperVoltage	:	REAL := GVL_Constants.cPiezoMaxVoltage; // E-816 has no software limits
		LowerVoltage	:	REAL := GVL_Constants.cPiezoMinVoltage; // E-816 has no software limits
END_STRUCT
END_TYPE
</pre></div>
</div>
</div>
<div class="section" id="gvl-gvl-constants">
<h2>GVL: GVL_Constants<a class="headerlink" href="#gvl-gvl-constants" title="Permalink to this headline">¶</a></h2>
<p>File: lcls_twincat_optics_plc/GVLs/GVL_Constants.TcGVL</p>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span>{attribute &#39;qualified_only&#39;}
VAR_GLOBAL CONSTANT
	nGANTRY_TOLERANCE_NM_DEFAULT : LINT := 50000; // default gantry tolerance in encoder counts = nm
	cPiezoMaxVoltage	:	LREAL := 120; // in Volts
	cPiezoMinVoltage	:	LREAL := -10; // in Volts
	cPiezoRange : REAL := 60.0; // From Old HOMS_FEE Project, 90 um of piezo stroke, unsure what these units are
END_VAR
</pre></div>
</div>
</div>
<div class="section" id="gvl-gvl-teststructs">
<h2>GVL: GVL_TestStructs<a class="headerlink" href="#gvl-gvl-teststructs" title="Permalink to this headline">¶</a></h2>
<p>File: lcls_twincat_optics_plc/GVLs/GVL_TestStructs.TcGVL</p>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span>{attribute &#39;qualified_only&#39;}
VAR_GLOBAL
	TestPitch_LimitSwitches : HOMS_PitchMechanism := (ReqPosLimHi:=2000,
		                                              ReqPosLimLo:=-2000,
		                                              diEncPosLimHi:=10768330,
		                                              diEncPosLimLo:=8141680);
END_VAR
</pre></div>
</div>
</div>
<div class="section" id="gvl-global-version">
<h2>GVL: Global_Version<a class="headerlink" href="#gvl-global-version" title="Permalink to this headline">¶</a></h2>
<p>File: lcls_twincat_optics_plc/Version/Global_Version.TcGVL</p>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span>{attribute &#39;TcGenerated&#39;}
{attribute &#39;no-analysis&#39;}
{attribute &#39;linkalways&#39;}
// This function has been automatically generated from the project information.
VAR_GLOBAL CONSTANT
	{attribute &#39;const_non_replaced&#39;}
	stLibVersion_lcls_twincat_optics : ST_LibVersion := (iMajor := 0, iMinor := 0, iBuild := 1, iRevision := 0, sVersion := &#39;0.0.1&#39;);
END_VAR
</pre></div>
</div>
</div>
<div class="section" id="pou-fb-bender">
<h2>POU: FB_Bender<a class="headerlink" href="#pou-fb-bender" title="Permalink to this headline">¶</a></h2>
<p>File: lcls_twincat_optics_plc/POUs/FB_Bender.TcPOU</p>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span><span class="n">FUNCTION_BLOCK</span> <span class="n">FB_Bender</span>
<span class="n">VAR_IN_OUT</span>
	<span class="n">stBender</span> <span class="o">:</span> <span class="n">DUT_MotionStage</span><span class="p">;</span>
	<span class="n">bSTOEnable1</span> <span class="o">:</span> <span class="n">BOOL</span><span class="p">;</span>
	<span class="n">bSTOEnable2</span> <span class="o">:</span> <span class="n">BOOL</span><span class="p">;</span>
<span class="n">END_VAR</span>
<span class="n">VAR_INPUT</span>
<span class="n">END_VAR</span>
<span class="n">VAR_OUTPUT</span>
<span class="n">END_VAR</span>
<span class="n">VAR</span>
<span class="n">END_VAR</span>
<span class="o">//</span> <span class="n">Simple</span> <span class="n">FB</span> <span class="k">to</span> <span class="n">tie</span> <span class="n">stBender</span><span class="p">.</span><span class="n">bHardwareEnable</span> <span class="k">to</span> <span class="n">STO</span>
<span class="o">//</span> <span class="n">Originally</span> <span class="n">part</span> <span class="k">of</span> <span class="n">FB_RunHOMS</span><span class="p">,</span> <span class="n">but</span> <span class="n">want</span> <span class="k">to</span> <span class="k">use</span> <span class="nn">this</span> <span class="k">for</span> <span class="k">all</span> <span class="n">systems</span><span class="p">,</span> <span class="k">not</span> <span class="k">all</span> <span class="k">of</span> <span class="n">which</span> <span class="n">have</span> <span class="n">a</span> <span class="n">bender</span> <span class="n">motor</span>
<span class="n">stBender</span><span class="p">.</span><span class="n">bHardwareEnable</span> <span class="o">:=</span> <span class="n">bSTOEnable1</span> <span class="k">AND</span> <span class="n">bSTOEnable2</span><span class="p">;</span>

<span class="n">END_FUNCTION_BLOCK</span>
</pre></div>
</div>
</div>
<div class="section" id="pou-fb-pi-e621-serialdriver">
<h2>POU: FB_PI_E621_SerialDriver<a class="headerlink" href="#pou-fb-pi-e621-serialdriver" title="Permalink to this headline">¶</a></h2>
<p>File: lcls_twincat_optics_plc/POUs/Helpers/FB_PI_E621_SerialDriver.TcPOU</p>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span>FUNCTION_BLOCK FB_PI_E621_SerialDriver
VAR_INPUT
	/// rising edge execute 
	i_xExecute: BOOL;
	/// Maximum wait time for reply 
	i_tTimeOut: TIME := TIME#1S0MS;
//	i_xReset : BOOL := FALSE; //reset function, for timeout etc
END_VAR
VAR_OUTPUT
	q_xDone: BOOL;
	q_xError: BOOL;
	q_sResult: STRING(255);
	/// Last Strings Sent to Serial Device - for debugging 
	q_asLastSentStrings: ARRAY[1..50] OF STRING;
	/// Last Strings Received from Serial Device - for debugging 
	q_asLastReceivedStrings: ARRAY[1..50] OF STRING;
END_VAR
VAR_IN_OUT
	iq_stPiezoAxis	:	ST_PiezoAxis;
	iq_stSerialRXBuffer: ComBuffer;
	iq_stSerialTXBuffer: ComBuffer;
END_VAR
VAR
	rtExecute		: R_TRIG;
	rtTransDone		: R_TRIG;
	iStep: INT;
	sSendData: STRING;
	fbPITransaction: FB_PI_E621_SerialTransaction;
	fbFormatString: FB_FormatString;
	sErrMesg : STRING := &#39;In step %d fbPITransaction failed with message: %s&#39;;
	i		: INT := 1;
END_VAR
(* S. Stubbs, 2-23-2017 *)
(* This function block drives serial communication with a PI E-816 or compatible comm module. 
   Note this needs to be re-jiggered if the E-517 is used, uses number rather than letter for axis *)

(* RS232 default settings: 115200 8N1, RTS/CTS

All commands follow format:
CMD X sV.V(Line feed)
Where CMD is the command, X is axis, and sV.V is sign and number (float or int).
Not all commands use axis and parameter, for example ERR?
*)

(* rising edge trigger *)
rtExecute(CLK:= i_xExecute);
IF rtExecute.Q THEN
	q_xDone	:= FALSE;
	q_xError := FALSE;
	q_sResult:= &#39;&#39;;
	iq_stPiezoAxis.xDriverError := FALSE;
//	i_xReset := FALSE;
	a_ClearTrans();  (* to provide rising edge for execute *)
	IF iq_stPiezoAxis.sIdn= &#39;&#39; THEN (* Should only need to check identity once *)
		iStep := 5;
	ELSE
		iStep := 10;
	END_IF
END_IF


CASE iStep OF
	0: (* idle *)
		;

	(* Commands *)
	5: (* Get Identity *)
			fbPITransaction.i_xExecute:= TRUE;
			fbPITransaction.i_sCmd:= &#39;*IDN?&#39;;
		IF fbPITransaction.q_xDone THEN
				iq_stPiezoAxis.sIdn := fbPITransaction.q_sResponseData; //Hello I am a piezo
				a_ClearTrans();  (* to provide rising edge for execute *)
				iStep := 10;
		ELSIF fbPITransaction.q_xError THEN
			a_ErrorMesg();
			iStep := 9000;
		END_IF
		
	10: (* Check Servo Mode 
		To use manual voltage servo mode must be off *)
		(* Response: 0$L or 1$L *)
		fbPITransaction.i_xExecute:= TRUE;
		fbPITransaction.i_sCmd:= &#39;SVO?&#39;;
		fbPITransaction.i_sAxis:= iq_stPiezoAxis.sAxis;
		IF fbPITransaction.q_xDone THEN
			IF FIND(&#39;1&#39;,fbPITransaction.q_sResponseData) &lt;&gt; 0 THEN //Iff in servo mode, turn it off
				a_ClearTrans();  (* to provide rising edge for execute *)
				iStep := iStep + 10;
			ELSE 
				a_ClearTrans();
				iStep := iStep + 20;  //Skip setting servo mode
			END_IF
		ELSIF fbPITransaction.q_xError THEN
			a_ErrorMesg();
			iStep := 9000;
		END_IF

	20: (* Set Servo Mode *)
		fbPITransaction.i_xExecute:= TRUE;
		fbPITransaction.i_sCmd:= &#39;SVO&#39;;
		fbPITransaction.i_sAxis:= iq_stPiezoAxis.sAxis;
		fbPITransaction.i_sParam:= &#39;0&#39;;
		fbPITransaction.i_xExpectReply:= FALSE;
		IF fbPITransaction.q_xDone THEN
			a_ClearTrans();  (* to provide rising edge for execute *)
			iStep := iStep + 10;
		ELSIF fbPITransaction.q_xError THEN
			a_ErrorMesg();
			iStep := 9000;
		END_IF
		
	30: (* Set Voltage, only if needed *)
		IF iq_stPiezoAxis.rSetVoltage &lt;&gt; iq_stPiezoAxis.rLastReqVoltage THEN
			fbPITransaction.i_xExecute:= TRUE;
			fbPITransaction.i_sCmd:= &#39;SVA&#39;;
			fbPITransaction.i_sAxis:= iq_stPiezoAxis.sAxis;
			fbPITransaction.i_sParam:=REAL_TO_STRING(iq_stPiezoAxis.rSetVoltage);
			fbPITransaction.i_xExpectReply:= FALSE;
			IF fbPITransaction.q_xDone THEN
					a_ClearTrans();  (* to provide rising edge for execute *)
					iStep := iStep + 10;
			ELSIF fbPITransaction.q_xError THEN
				a_ErrorMesg();
				iStep := 9000;
			END_IF
		ELSE
			iStep := iStep + 30; //Should only need to check error and setpoint if setting voltage
		END_IF

	40: (* Get Error Code, also resets current error *)
	(* Response: integer error code *)
			fbPITransaction.i_xExecute:= TRUE;
			fbPITransaction.i_sCmd:= &#39;ERR?&#39;;
		IF fbPITransaction.q_xDone THEN
				iq_stPiezoAxis.iCurError := STRING_TO_INT(fbPITransaction.q_sResponseData);
				IF iq_stPiezoAxis.iCurError &lt;&gt; 0 THEN
					iq_stPiezoAxis.iLastError:= iq_stPiezoAxis.iCurError;
				END_IF
				a_ClearTrans();  (* to provide rising edge for execute *)
				iStep := iStep + 10;
		ELSIF fbPITransaction.q_xError THEN
			a_ErrorMesg();
			iStep := 9000;
		END_IF

	50: (* Get Last Requested Piezo Voltage *)
	(* Response: (float)$L *)
			fbPITransaction.i_xExecute:= TRUE;
			fbPITransaction.i_sCmd:= &#39;SVA?&#39;;
			fbPITransaction.i_sAxis:= iq_stPiezoAxis.sAxis;
		IF fbPITransaction.q_xDone THEN
			iq_stPiezoAxis.rLastReqVoltage := STRING_TO_REAL(fbPITransaction.q_sResponseData);
			//Check and reset attempts if it went through
			a_ClearTrans();  (* to provide rising edge for execute *)
			iStep := iStep + 10;
		ELSIF fbPITransaction.q_xError THEN
			a_ErrorMesg();
			iStep := 9000;
		END_IF
		
	60: (* Get Actual Piezo Voltage *)
	(* Response: (float)$L *)
			fbPITransaction.i_xExecute:= TRUE;
			fbPITransaction.i_sCmd:= &#39;VOL?&#39;;
			// E-517 works differently, uses number rather than letter for axis
			fbPITransaction.i_sAxis:= iq_stPiezoAxis.sAxis;
		IF fbPITransaction.q_xDone THEN
				iq_stPiezoAxis.rActVoltage := STRING_TO_REAL(fbPITransaction.q_sResponseData);
				a_ClearTrans();  (* to provide rising edge for execute *)
				iStep := 8000; (* Done *)
		ELSIF fbPITransaction.q_xError THEN
			a_ErrorMesg();
			iStep := 9000;
		END_IF
		
	8000: (* done *)
		q_xDone := TRUE;
		IF  i_xExecute = FALSE THEN
			q_xDone:= FALSE;
			iStep := 0;
		END_IF

	9000: (* Error *)
		a_ClearTrans();  (* to provide rising edge for execute *)
		IF fbPITransaction.q_xTimeout THEN
			iStep:=10;//start over
		ELSE
		q_xError := TRUE;
		iq_stPiezoAxis.xDriverError := TRUE;
		END_IF	

END_CASE

//call transaction
fbPITransaction(
	iq_stSerialRXBuffer:= iq_stSerialRXBuffer, 
	iq_stSerialTXBuffer:= iq_stSerialTXBuffer);

iq_stPiezoAxis.xTimeout:=fbPITransaction.q_xTimeout;
(* Rising edge trigger to take care of debugging history *)
rtTransDone(CLK:= fbPITransaction.q_xDone);
IF rtTransDone.Q THEN
q_asLastSentStrings[i] := fbPITransaction.q_sLastSentString;
q_asLastReceivedStrings[i] := fbPITransaction.q_sLastReceivedString;
i := i + 1; 
END_IF
IF i = 51 THEN i := 1; END_IF

END_FUNCTION_BLOCK
ACTION a_ClearTrans:
(* Refactor this action to match your transaction *)
fbPITransaction.i_xExecute := TRUE;
fbPITransaction.i_sCmd:= &#39;&#39;; //Input args are Cmd, Axis and Param
fbPITransaction.i_sAxis:= &#39;&#39;;
fbPITransaction.i_sParam:= &#39;&#39;;
fbPITransaction(
	i_tTimeOut:= i_tTimeOut, 
	iq_stSerialRXBuffer:= iq_stSerialRXBuffer,
	iq_stSerialTXBuffer:= iq_stSerialTXBuffer );
fbPITransaction.i_xExecute := FALSE;
fbPITransaction(
	i_tTimeOut:= i_tTimeOut, 
	iq_stSerialRXBuffer:= iq_stSerialRXBuffer,
	iq_stSerialTXBuffer:= iq_stSerialTXBuffer );
fbPITransaction.i_xExpectReply:=TRUE;
END_ACTION
ACTION a_ErrorMesg:
fbFormatString( sformat:=sErrMesg, 
	arg1:=F_INT(iStep), 
	arg2:=F_STRING(fbPITransaction.q_sResult),
	sOut =&gt; q_sResult);
END_ACTION
ACTION a_UnknownError:
q_sResult:= &#39;Unknown error&#39;;

fbFormatString( sformat:=sErrMesg, 
	arg1:=F_INT(iStep), 
	arg2:=F_STRING(q_sResult), //Little silly, but have to do this because F_STRING requires read/write access
	sOut =&gt; q_sResult);
END_ACTION
</pre></div>
</div>
</div>
<div class="section" id="pou-fb-pi-e621-serialtransaction">
<h2>POU: FB_PI_E621_SerialTransaction<a class="headerlink" href="#pou-fb-pi-e621-serialtransaction" title="Permalink to this headline">¶</a></h2>
<p>File: lcls_twincat_optics_plc/POUs/Helpers/FB_PI_E621_SerialTransaction.TcPOU</p>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span>FUNCTION_BLOCK FB_PI_E621_SerialTransaction
VAR_INPUT
	/// rising edge execute 
	i_xExecute: BOOL;
	/// Maximum wait time for reply 
	i_tTimeOut: TIME := TIME#1s0ms;
	// Command field
	i_sCmd: STRING;
	// Axis field
	i_sAxis: STRING;
	// Parameter field
	i_sParam: STRING;
	// Does command have a reply?  Default behavior is the same as the other drivers.
	i_xExpectReply: BOOL := TRUE;
END_VAR
VAR_OUTPUT
	q_xDone: BOOL;
	q_sResponseData: STRING;
	q_xError: BOOL;
	q_xTimeout: BOOL;
	q_sResult: STRING;
	/// Last String Sent to Serial Device - for debugging 
	q_sLastSentString: STRING;
	/// Last String Received from Serial Device - for debugging 
	q_sLastReceivedString: STRING;
END_VAR
VAR_IN_OUT
	iq_stSerialRXBuffer: ComBuffer;
	iq_stSerialTXBuffer: ComBuffer;
END_VAR
VAR
	rtExecute: R_TRIG;
	iStep: INT;
	fbClearComBuffer: ClearComBuffer;
	sSendString: STRING;
	fbFormatString: FB_FormatString;
	iChecksum: INT;
	fbSendString: SendString;
	fbReceiveString: ReceiveString;
	sReceivedString: STRING;
	tonTimeout: TON;
	sRXStringForChecksum: STRING;
	sReceiveStringWOChecksum: STRING;
	sRXCheckSum: STRING;
	sRXAddress: STRING;
	sRXParmNum: STRING;
END_VAR
(* This function block performs serial transactions with a PI E-816 or compatible comm module *)

(* rising edge trigger *)
rtExecute(CLK:= i_xExecute);
IF rtExecute.Q THEN
	q_xDone	:= FALSE;
	q_sResponseData := &#39;&#39;;
	q_xError := FALSE;
	q_sResult:= &#39;&#39;;
	q_sLastSentString := &#39;&#39;;
	q_sLastReceivedString:= &#39;&#39;;
	iStep := 10;
END_IF

CASE iStep OF
	0:
		; (* idle *)

	10: (* clear com buffers *)
		fbClearComBuffer(Buffer:= iq_stSerialRXBuffer);
		fbClearComBuffer(Buffer:= iq_stSerialTXBuffer);
		(* build the send string *)
		IF i_sParam = &#39;&#39; AND i_sAxis &lt;&gt; &#39;&#39; THEN //Axis but no parameter
			fbFormatString( sFormat:= &#39;%s %s$L&#39;, 
				arg1:= F_STRING(i_sCmd),
				arg2:= F_STRING(i_sAxis),
				sOut=&gt; sSendString);
		ELSIF i_sParam &lt;&gt; &#39;&#39; AND i_sAxis = &#39;&#39; THEN //Parameter but no axis, global command
			fbFormatString( sFormat:= &#39;%s %s$L&#39;, 
				arg1:= F_STRING(i_sCmd),
				arg2:= F_STRING(i_sParam), //May not work for all commands, good enough for now
				sOut=&gt; sSendString);
		ELSIF i_sParam = &#39;&#39; AND i_sAxis = &#39;&#39; THEN //Global Query/Command
			fbFormatString( sFormat:= &#39;%s$L&#39;, 
			arg1:= F_STRING(i_sCmd),
			sOut=&gt; sSendString);
		ELSE
			fbFormatString( sFormat:= &#39;%s %s %s$L&#39;, 
				arg1:= F_STRING(i_sCmd),
				arg2:= F_STRING(i_sAxis),
				arg3:= F_STRING(i_sParam), //May not work for all commands, good enough for now
				sOut=&gt; sSendString);
		END_IF
		(* send it *)
		fbSendString( SendString:= sSendString, TXbuffer:= iq_stSerialTXBuffer );
		q_sLastSentString := sSendString;
		iStep := iStep + 10;

	20: (* Finish sending the String *)
		IF fbSendString.Busy THEN
			fbSendString( SendString:= sSendString, TXbuffer:= iq_stSerialTXBuffer );
		ELSIF fbSendString.Error &lt;&gt; 0 THEN
			q_sResult := CONCAT(&#39;In step 20 fbSendString resulted in error: &#39;, INT_TO_STRING(fbSendString.Error));
			iStep := 9000;
		ELSIF NOT fbSendString.Busy THEN
			IF i_xExpectReply THEN
			iStep := iStep + 10;
			ELSE //No reply expected, transaction complete
			q_xDone:= TRUE;
			q_sResult := &#39;Success.&#39;;
			q_xTimeout := FALSE; //no timeout
			iStep := 100;
			END_IF
		END_IF
		(* Reset receive *)
		fbReceiveString(
			Reset:= TRUE,
			ReceivedString:= sReceivedString,
			RXbuffer:= iq_stSerialRXBuffer );
		tonTimeout(IN:= FALSE);

	30: (* Get reply, if there is one *)
		fbReceiveString(
			Prefix:= ,
			Suffix:= &#39;$L&#39;,
			Timeout:= i_tTimeOut,
			Reset:= FALSE,
			ReceivedString:= sReceivedString,
			RXbuffer:= iq_stSerialRXBuffer );
		tonTimeout(IN:= TRUE, PT:= i_tTimeOut);
		IF fbReceiveString.Error &lt;&gt; 0 AND fbReceiveString.Error &lt;&gt; 16#1008 THEN //16#1008 is timeout error
			q_sResult := CONCAT(&#39;In step 30 fbReceiveString resulted in error: &#39;, INT_TO_STRING(fbReceiveString.Error));
			iStep := 9000;
		ELSIF fbReceiveString.RxTimeout OR tonTimeout.Q THEN
			q_sResult := &#39;Device failed to reply within timeout period&#39;;
			q_xTimeout := TRUE;
			iStep := 9000;
		ELSIF fbReceiveString.StringReceived THEN
			q_xTimeout := FALSE; //no timeout
			q_sLastReceivedString := sReceivedString;
			q_sResponseData := sReceivedString;
			q_sResult := &#39;Success.&#39;;
			q_xDone:= TRUE;
			iStep := 100;
		END_IF

	100: (* done *)
		IF  i_xExecute = FALSE THEN
			q_xDone:= FALSE;
			iStep := 0;
		END_IF

	9000:
		q_xError := TRUE;
		
END_CASE

END_FUNCTION_BLOCK
</pre></div>
</div>
</div>
<div class="section" id="pou-fb-piezocontrol">
<h2>POU: FB_PiezoControl<a class="headerlink" href="#pou-fb-piezocontrol" title="Permalink to this headline">¶</a></h2>
<p>File: lcls_twincat_optics_plc/POUs/FB_PiezoControl.TcPOU</p>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span>FUNCTION_BLOCK FB_PiezoControl
VAR_IN_OUT
	iq_Piezo	:	ST_PiezoAxis;
END_VAR
VAR_INPUT
	xExecute	:	BOOL; //Rising edge being piezo motion
	xReset      :   BOOL;
	Enable_Positive : BOOL; //Reverse of Positive Limit Switch
	Enable_Negative : BOOL; //Reverse of Negative Limit Switch
END_VAR
VAR_OUTPUT
	xBusy	:	BOOL; //Busy remains true while piezo position is being adjusted
	xDone	:	BOOL; //Reached target position
	xError	:	BOOL; //General error
	xLimited:	BOOL; //Piezo move was limited
END_VAR
VAR
	E_State     : E_PiezoControl; //ENUM for Piezo Control State
	rtStartMove : R_TRIG; //Rising Trigger for Execution
	rtReset     : R_TRIG; //Rising Trigger for Error reset
	rSetpoint   : REAL;   //Internal Storage of Setpoint
	rReqVoltage	:	REAL; //requested voltage
	rLLSV: REAL := 0;
	rHLSV: REAL := 120;
	fbPI: FB_CTRL_PI;
	fbRamp: FB_CTRL_RAMP_GENERATOR_EXT;
	// FB initialized flag
	bInitialized: BOOL;
	//Get cycle time for control FBs
	fbGetCycleTime	:	FB_CTRL_GET_TASK_CYCLETIME;
	tTaskCycleTime: TIME;
	bCycleTimeValid: BOOL;
	rtVoltMode: R_TRIG;
	fOut: LREAL;
	fPiezoBias: LREAL := 60;
	fScale: REAL := -60;
	tonPiezoDone: TON := (PT:=T#2S);
	tonPiezoLimited: TON := (PT:=T#500MS);
	xVoltageLimited: BOOL;
	ftEnPos	:	F_TRIG;
	ftEnNeg	:	F_TRIG;
	rtEnPos	:	R_TRIG;
	rtEnNeg	:	R_TRIG;
	fOutLimitHolder	:	LREAL; //holds the limit value until restored
	fOutHiLimHolder	:	LREAL; //holds the limit value until restored
	fOutLoLimHolder	:	LREAL; //holds the limit value until restored
	xFirstPass 	: 	BOOL := TRUE;
END_VAR
// FB Piezo Control

//Triggers
///////////////////////////////
	rtStartMove(CLK:=xExecute);
	rtReset(CLK:=iq_Piezo.xEnable);
	rtVoltMode(CLK:=iq_Piezo.xVoltageMode);

//Status bits
///////////////////////////
xBusy S= rtStartMove.Q;
xDone R= rtStartMove.Q;
	
//Keep requested voltage to within limits
iq_Piezo.rReqVoltage := LIMIT(iq_Piezo.LowerVoltage, iq_Piezo.rReqVoltage, iq_Piezo.UpperVoltage);

//Limits
(* These appear flipped, but in-fact are not *)
ftEnPos(CLK:=Enable_Positive);
ftEnNeg(CLK:=Enable_Negative);
rtEnPos(CLK:=Enable_Positive);
rtEnNeg(CLK:=Enable_Negative);
IF xFirstPass THEN
	//Want to hold the limits on first pass if a switch is hit.
	(* When we move off the limit, we&#39;ll restore the init value (usually 1). This will be reset
	to something less than 1 when the limit gets tripped again, because presumably the actual limit
	would have been set at a value &lt; 1 if the system had been runing.
	We just need to hold the init value to make it past this edge case that is present at startup. *)
	IF NOT Enable_Positive THEN fOutHiLimHolder := iq_Piezo.stPIParams.fOutMaxLimit; END_IF
	IF NOT Enable_Negative THEN fOutLoLimHolder := iq_Piezo.stPIParams.fOutMinLimit; END_IF
ELSE
	IF ftEnPos.Q THEN
		rLLSV := iq_Piezo.rSetVoltage;
		fOutHiLimHolder := iq_Piezo.stPIParams.fOutMaxLimit;
		iq_Piezo.stPIParams.fOutMaxLimit := fbPI.fOut;
	ELSIF rtEnPos.Q THEN
		rLLSV := iq_Piezo.LowerVoltage;
		iq_Piezo.stPIParams.fOutMaxLimit := fOutHiLimHolder;
	END_IF

	IF ftEnNeg.Q THEN
		rHLSV := iq_Piezo.rSetVoltage;
		
		fOutLoLimHolder := iq_Piezo.stPIParams.fOutMinLimit;
		iq_Piezo.stPIParams.fOutMinLimit := fbPI.fOut;
	ELSIF rtEnNeg.Q THEN
		rHLSV := iq_Piezo.UpperVoltage;
		iq_Piezo.stPIParams.fOutMinLimit := fOutLoLimHolder;
	END_IF
END_IF

// Don&#39;t do anything until we&#39;re ready
IF bInitialized THEN
	// While the block is working, a new position may be requested, this is OK
	IF xBusy THEN
		fbPI.fSetpointValue := iq_Piezo.rReqAbsPos;
	END_IF

	(* The next chunk of code prevents the PI block from winding up.
		First, when the PI block begins to request a voltage that is 
		beyond the permitted range (this range is affected by the state
		of limit switches/ or enable fwd/bwd), we latch the requested position.
		Presumeably this position request  *)

	//Select the PI block control mode
	////////////////////////////////////////
	IF iq_Piezo.xVoltageMode THEN
		//Set PI block to idle
		fbPI.eMode := eCTRL_MODE_PASSIVE;
		rReqVoltage := iq_Piezo.rReqVoltage; //TODO add a ramp
	ELSE
		IF iq_Piezo.xIdleMode THEN
			rReqVoltage := fScale * 0 + fPiezoBias;

			fbPI.eMode := eCTRL_MODE_MANUAL;
			ACT_Controller();
			fbPI.bHold := TRUE;
		ELSE
			//Fout is connected to the piezo voltage control
			rReqVoltage := fScale * fbPI.fOut + fPiezoBias;
			fbPI.bHold := FALSE;
			//Control mode is always active, so compensation takes over more smoothly
			fbPI.eMode := eCTRL_MODE_ACTIVE;
		END_IF		
	
	END_IF

	ACT_Controller();

	xVoltageLimited := rLLSV &gt; rReqVoltage OR rHLSV &lt; rReqVoltage;

	//This is where the voltage request gets sent to the piezo driver
	iq_Piezo.rSetVoltage := LIMIT(rLLSV, rReqVoltage, rHLSV);

//Initialization
ELSE
	fbGetCycleTime( eMode   := eCTRL_MODE_ACTIVE,
                tTaskCycleTime =&gt; tTaskCycleTime,
                bCycleTimeValid =&gt; bCycleTimeValid);
	IF bCycleTimeValid THEN
		iq_Piezo.stPIParams.tTaskCycleTime := tTaskCycleTime;
		iq_Piezo.stPIParams.tCtrlCycleTime := tTaskCycleTime;
		bInitialized	:= TRUE;
	END_IF

END_IF

tonPiezoDone.IN := WithinRange(ValA:=iq_Piezo.rActPos, Center:=iq_Piezo.rReqAbsPos, Range:=iq_Piezo.rPiezoDmovRange, Offset:=0) 
					AND NOT rtStartMove.Q; //rtStartMove interrupts the timer, resetting it
tonPiezoDone();

tonPiezoLimited.IN := (fbPI.bARWactive OR xVoltageLimited) AND NOT rtStartMove.Q;
tonPiezoLimited();

xDone S= xBusy AND (tonPiezoDone.Q OR tonPiezoLimited.Q);
xLimited := tonPiezoLimited.Q;

xBusy R= xDone;

xFirstPass := FALSE;

END_FUNCTION_BLOCK
ACTION ACT_CheckLimits:

END_ACTION
ACTION ACT_Controller:

END_ACTION
</pre></div>
</div>
</div>
<div class="section" id="pou-fb-pitchcontrol">
<h2>POU: FB_PitchControl<a class="headerlink" href="#pou-fb-pitchcontrol" title="Permalink to this headline">¶</a></h2>
<p>File: lcls_twincat_optics_plc/POUs/FB_PitchControl.TcPOU</p>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span>FUNCTION_BLOCK FB_PitchControl
VAR_IN_OUT
    Pitch : HOMS_PitchMechanism;
	Stepper : DUT_MotionStage;
END_VAR
VAR_INPUT
	lrCurrentSetpoint : LREAL; // Setpoint: Epics writes to DUT_MotionStage which gets fed into this
END_VAR
VAR_OUTPUT
	q_bError : BOOL;
	q_bDone : BOOL;
	q_bBusy : BOOL;
END_VAR
VAR
	// Logging
	stDiag : ST_fbDiagnostics;
	fbFormatString : FB_FormatString;
	{attribute &#39;instance-path&#39;}
	{attribute &#39;no_init&#39;}
	POUName : STRING; // Name of the POU for logging/error reporting

	// Stepper Motion
    lrActPos : LREAL; // Actual Position of piezo mechanism
	lrPrevStepperPos : LREAL; // Previous successfully achieved stepper position
	ftLimitSwitch : F_TRIG;
	lrOriginalPosRequest : LREAL; // Used for logging
	lrLastSetpoint : LREAL; // Previous successfully achieved setpoint
	fbMotionRequest : FB_MotionRequest;
	fbMotionStage : FB_MotionStage;
	bLimitHit : BOOL;
	tonStepperHold : TON := (PT:=T#100MS); // Timer to hold stepper position while the system relaxes
	rSettledRange : REAL := 5.0; // Units = urad
	bResetStepper : BOOL;
	bExecuteStepper : BOOL;
	enumMotionRequest : ENUM_MotionRequest := ENUM_MotionRequest.WAIT; // Wait for move to complete before taking another request

	// Piezo
	tonPiezoSettled : TON := (PT:=T#2S);
	fbPiezoControl : FB_PiezoControl;
	rtPiezoMoveDone : R_TRIG;

	// State Machine
	PC_State : E_PitchControl := PCM_Init;
	bCoarse50PiezoMove : BOOL;
END_VAR
(* HOMS Pitch Control
A. Wallace
J. Sheppard - Updating to new lcls-twincat-motion API

The HOMS Pitch mechanism consists of a stepper and piezo that work together to adjust
the pitch of the mirror assembly.

Pitch control state machine

If the target position is beyond the range of the piezo mechanism,
execute a coarse pitch move with the stepper. 
The target of the coarse move shall be set to the requested position. 
Once coarse motion has completed the coarse motion drive position 
correction output shall be set to zero.

Fine pitch motion with the piezo will be initiated to finish closing the loop.

The piezo mechanism can actuate ~ 180urad or 90um.

*)
lrActPos := Stepper.stAxisStatus.fActPosition;

// If we hit a limit during a move, we need to change the setpoint
ftLimitSwitch(CLK:=Stepper.bAllForwardEnable AND Stepper.bAllBackwardEnable);
IF ftLimitSwitch.Q THEN
	bExecuteStepper := FALSE;
	bLimitHit := TRUE;
	lrCurrentSetpoint := lrActPos;
END_IF

// Left out Manual Mode Switch and Tweak FBs

// State Machine
CASE PC_State OF
	PCM_Init:
		lrCurrentSetpoint := lrActPos;
		lrLastSetpoint := lrCurrentSetpoint;
		lrPrevStepperPos := lrCurrentSetpoint;
		PC_State := PCM_Standby;
	PCM_Standby:
		// Waits for move requests and determines if they are valid
		IF (lrLastSetpoint &lt;&gt; lrCurrentSetpoint) THEN // lrLastSetpoint initially set in PCM_Done
			// Check for bad setpoints -&gt; revert to previous setpoint
			IF 	(lrCurrentSetpoint &gt; Pitch.ReqPosLimHi) OR (lrCurrentSetpoint &lt; Pitch.ReqPosLimLo) OR NOT Stepper.bHardwareEnable THEN
				// Outside range of limit switches or bHardwareEnable is FALSE
				ACT_ResetSetpoint();
			ELSIF lrCurrentSetpoint &gt; lrLastSetpoint AND NOT Stepper.bAllForwardEnable THEN
				// Forward move when on HL
				ACT_ResetSetpoint();
			ELSIF lrCurrentSetpoint &lt; lrLastSetpoint AND NOT Stepper.bAllBackwardEnable THEN
				// Backward move when on LL
				ACT_ResetSetpoint();
			END_IF
			// If the current setpoint still differs from the prvious, we know the move is safe and OK to proceed
			IF lrLastSetpoint &lt;&gt; lrCurrentSetpoint THEN
				q_bDone := FALSE;
				PC_State := PCM_MoveRequested;
			END_IF
		END_IF
	PCM_MoveRequested:
		// A move has been requested, is it within range of the piezo?
		IF WithinRange(ValA:=lrCurrentSetpoint, Center:=lrPrevStepperPos, Range:=GVL_Constants.cPiezoRange, Offset:=0) THEN
			// Move is within the nominal range of the piezo
			fbFormatString.sFormat := &#39;Within range, fine move %f&#39;;
			fbFormatString.arg1 := F_LREAL(lrCurrentSetpoint);
			fbFormatString(sOut=&gt;stDiag.asResults[stDiag.resultIdx.IncVal()]);
			PC_State := PCM_FineMove;
		ELSE
			// Out of range, head to coarse move
			fbFormatString.arg1 := F_LREAL(lrCurrentSetpoint);
			fbFormatString.sFormat := &#39;OoR, using stepper %f&#39;;
			fbFormatString(sOut=&gt;stDiag.asResults[stDiag.resultIdx.IncVal()]);
			PC_State := PCM_Coarse50Piezo;
		END_IF
	PCM_Coarse50Piezo:
		// A coarse move uses the stepper to do a best-effort position
		// First set the piezo to nominal 50% extension using idle mode
		//////////////////////////////////////////////////////////////////////////////
		Pitch.Piezo.xIdleMode := TRUE;
		// Indicate we are doing the coarse 50% piezo move	
		bCoarse50PiezoMove := TRUE;
		// Wait for piezo to settle
		tonPiezoSettled.IN := TRUE;
		bCoarse50PiezoMove R= tonPiezoSettled.Q;
		IF tonPiezoSettled.Q THEN
			//Piezo has moved to 50% position, finish with the stepper
			PC_State := PCM_CoarseMove;
			tonPiezoSettled.IN := FALSE;
		END_IF
	PCM_CoarseMove: 
		// With the piezo at a nominal 50% extension, move the stepper to requested position
		bExecuteStepper := TRUE;
		// Timer that waits to start until stepper is within range of the setpoint
		tonStepperHold.IN := WithinRange(ValA:=LREAL_TO_REAL(lrActPos), Center:=lrCurrentSetpoint, Range:=rSettledRange, Offset:=0);
		tonStepperHold(); // call this here to reset Q just below on first cycle
		// If the coarse move is complete, finish position correction with the piezo
		IF tonStepperHold.Q  OR ftLimitSwitch.Q THEN
			PC_State := PCM_CoarseMoveCleanup;
			lrPrevStepperPos := lrActPos;
		ELSIF Stepper.bError THEN
			bExecuteStepper := FALSE;
			PC_State := PCM_StepperError;
			// Left out logging
		END_IF
	PCM_CoarseMoveCleanup:
		bExecuteStepper := FALSE;
		PC_State := PCM_FineMove;
	PCM_FineMove:	
		Pitch.Piezo.xIdleMode := FALSE;
		fbPiezoControl.xExecute := TRUE;
		IF bLimitHit THEN
			Pitch.Piezo.rReqAbsPos := lrActPos;
		ELSE
			Pitch.Piezo.rReqAbsPos := lrCurrentSetpoint;
		END_IF
		rtPiezoMoveDone(CLK:=fbPiezoControl.xDone);
		IF rtPiezoMoveDone.Q THEN
			fbPiezoControl.xExecute := FALSE;
			PC_State := PCM_Done;
		END_IF
	PCM_Done:
		// Set the previously requested position here
		lrLastSetpoint := lrCurrentSetpoint;
		bLimitHit := FALSE;
		// Indicate we&#39;re done
		q_bDone	:= TRUE;
		// Move back to standby
		PC_State := PCM_Standby;
	PCM_StepperError:
		PC_State := PCM_Init;
	PCM_PiezoError:
		PC_State := PCM_Init;
	PCM_OtherError:
		PC_State := PCM_Init;
END_CASE

fbMotionStage(stMotionStage:=Stepper);

// Transfer to the Piezo
Pitch.Piezo.rActPos := lrActPos;

tonPiezoSettled();
tonStepperHold();
fbPiezoControl(iq_Piezo:=Pitch.Piezo,
	           Enable_Positive:=Stepper.bLimitForwardEnable,
			   Enable_Negative:=Stepper.bLimitBackwardEnable);

END_FUNCTION_BLOCK
ACTION ACT_ResetSetpoint:
// Action to reset the Setpoint to the previous value when:
// - New setpoint outside range of soft limits
// - bHardwareEnable is FALSE
// - Limit switches are hit and new setpoint the direction of the hit switch

lrOriginalPosRequest := lrCurrentSetpoint;
lrCurrentSetpoint := lrLastSetpoint;
// Only want to log one warning about a bad position request
IF lrOriginalPosRequest &lt;&gt; lrCurrentSetpoint THEN
	// Log a warning
	fbFormatString.sFormat := &#39;Pitch req OoR fb (%s), reset within limits, %f&#39;;
	fbFormatString.arg1 := F_STRING(POUName);
	fbFormatString.arg2 := F_LREAL(lrOriginalPosRequest);
	fbFormatString(sOut=&gt;stDiag.asResults[stDiag.resultIdx.IncVal()]);
	PC_State := PCM_Standby;
END_IF
END_ACTION
</pre></div>
</div>
</div>
<div class="section" id="pou-fb-rmswatch">
<h2>POU: FB_RMSWatch<a class="headerlink" href="#pou-fb-rmswatch" title="Permalink to this headline">¶</a></h2>
<p>File: lcls_twincat_optics_plc/POUs/FB_RMSWatch.TcPOU</p>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span>FUNCTION_BLOCK FB_RMSWatch
VAR_INPUT
END_VAR
VAR_OUTPUT
	// RMS Error
	fMaxRMSError : LREAL := 0;
	fMinRMSError : LREAL := 1000; // start at something huge, FB will update with any smaller measured value
END_VAR
VAR_IN_OUT
	stMotionStage : DUT_MotionStage;
END_VAR
VAR
	fbDataActPos : FB_LREALBuffer; // ActPos Data Acquisition FB
	fbDataSetPos : FB_LREALBuffer; // SetPos Data Acquisition FB
	bExecuteDataStorage : BOOL := TRUE; // Take data of both ActPos and SetPos
	bNewEncArray : BOOL;

	fbStats : FB_BasicStats; // Calculate mean/standard deviation of ActPos
	{attribute &#39;pytmc&#39; := &#39;
		pv: MEAN
		io: i
    &#39;}
	fEncMean : LREAL;
	{attribute &#39;pytmc&#39; := &#39;
		pv: STDEV
		io: i
    &#39;}
	fEncStDev : LREAL;
	{attribute &#39;pytmc&#39; := &#39;
		pv: RMS
		io: i
    &#39;}
	fCurrRMSError : LREAL := 0;

	nIndex : DINT;
	fSum : LREAL := 0; // Just for calculating rms
	fDiff : LREAL := 0;

	{attribute &#39;pytmc&#39; := &#39;
		pv: ACTPOSARRAY
		io: i
    &#39;}
	aEncActPos : ARRAY [1..1000] OF LREAL;
	{attribute &#39;pytmc&#39; := &#39;
		pv: SETPOSARRAY
		io: i
	&#39;}
	aEncSetPos : ARRAY [1..1000] OF LREAL;
END_VAR
// FB to store encoder positions in 1000 element arrays, compute RMS errors, and watch for min/max

// Encoder Readback/Storage
fbDataActPos(bExecute:=bExecuteDataStorage,
           	 fInput:=stMotionStage.stAxisStatus.fActPosition,
           	 arrOutput=&gt;aEncActPos,
             bNewArray=&gt;bNewEncArray);

fbDataSetPos(bExecute:=bExecuteDataStorage,
           	 fInput:=stMotionStage.Axis.NcToPlc.SetPos,
           	 arrOutput=&gt;aEncSetPos);

fbStats(aSignal:=aEncActPos,
	    bAlwaysCalc:=TRUE,
		fMean=&gt;fEncMean,
		fStDev=&gt;fEncStDev);

// Calculate RMS Error:
If bNewEncArray THEN
	fCurrRMSError := 0;
	FOR nIndex := 2 TO 1000 DO
		// First point in array stuck as 0 for some reason...
		fDiff := aEncActPos[nIndex] - aEncSetPos[nIndex];
		fSum := EXPT(fDiff, 2);
		fCurrRMSError := fCurrRMSError + fSum;
	END_FOR;
	fCurrRMSError := fCurrRMSError / 999.0; // 1000 element array but ditched the first point
	fCurrRMSError := SQRT(fCurrRMSError);
	// Watch for max:
	IF fCurrRMSError &gt; fMaxRMSError THEN
		fMaxRMSError := fCurrRMSError;
	END_IF
	// Watch for min:
	IF fCurrRMSError &lt; fMinRMSError THEN
		fMinRMSError := fCurrRMSError;
	END_IF
END_IF

END_FUNCTION_BLOCK
</pre></div>
</div>
</div>
<div class="section" id="pou-fb-runhoms">
<h2>POU: FB_RunHOMS<a class="headerlink" href="#pou-fb-runhoms" title="Permalink to this headline">¶</a></h2>
<p>File: lcls_twincat_optics_plc/POUs/FB_RunHOMS.TcPOU</p>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span><span class="n">FUNCTION_BLOCK</span> <span class="n">FB_RunHOMS</span>
<span class="n">VAR_INPUT</span>
	<span class="o">//</span> <span class="n">Encoder</span> <span class="n">Reference</span> <span class="n">Values</span>
	<span class="n">nYupEncRef</span> <span class="o">:</span> <span class="n">ULINT</span><span class="p">;</span>
	<span class="n">nYdwnEncRef</span> <span class="o">:</span> <span class="n">ULINT</span><span class="p">;</span>
	<span class="n">nXupEncRef</span> <span class="o">:</span> <span class="n">ULINT</span><span class="p">;</span>
	<span class="n">nXdwnEncRef</span> <span class="o">:</span> <span class="n">ULINT</span><span class="p">;</span>

	<span class="o">//</span> <span class="n">Gantry</span> <span class="n">Tolerances</span>
	<span class="n">nGantryTolY</span> <span class="o">:</span> <span class="n">LINT</span> <span class="o">:=</span> <span class="n">GVL_Constants</span><span class="p">.</span><span class="n">nGANTRY_TOLERANCE_NM_DEFAULT</span><span class="p">;</span> <span class="o">//</span> <span class="n">Encoder</span> <span class="n">counts</span> <span class="o">=</span> <span class="n">nm</span>
	<span class="n">nGantryTolX</span> <span class="o">:</span> <span class="n">LINT</span> <span class="o">:=</span> <span class="n">GVL_Constants</span><span class="p">.</span><span class="n">nGANTRY_TOLERANCE_NM_DEFAULT</span><span class="p">;</span> <span class="o">//</span> <span class="n">Encoder</span> <span class="n">counts</span> <span class="o">=</span> <span class="n">nm</span>
<span class="n">END_VAR</span>
<span class="n">VAR_OUTPUT</span>
	<span class="o">//</span> <span class="n">Gantry</span> <span class="n">coupling</span> <span class="n">status</span>
	<span class="n">bGantryAlreadyCoupledY</span> <span class="o">:</span> <span class="n">BOOL</span><span class="p">;</span>
	<span class="n">bGantryAlreadyCoupledX</span> <span class="o">:</span> <span class="n">BOOL</span><span class="p">;</span>
	
	<span class="o">//</span> <span class="n">Current</span> <span class="n">gantry</span> <span class="n">difference</span>
	<span class="n">nCurrGantryY</span> <span class="o">:</span> <span class="n">LINT</span><span class="p">;</span>
	<span class="n">nCurrGantryX</span> <span class="o">:</span> <span class="n">LINT</span><span class="p">;</span>
<span class="n">END_VAR</span>
<span class="n">VAR_IN_OUT</span>
	<span class="o">//</span> <span class="n">Motor</span> <span class="n">Structs</span>
	<span class="n">stYup</span> <span class="o">:</span> <span class="n">DUT_MotionStage</span><span class="p">;</span>
	<span class="n">stYdwn</span> <span class="o">:</span> <span class="n">DUT_MotionStage</span><span class="p">;</span>
	<span class="n">stXup</span> <span class="o">:</span> <span class="n">DUT_MotionStage</span><span class="p">;</span>
	<span class="n">stXdwn</span> <span class="o">:</span> <span class="n">DUT_MotionStage</span><span class="p">;</span>
	<span class="n">stPitch</span> <span class="o">:</span> <span class="n">DUT_MotionStage</span><span class="p">;</span>

	<span class="o">//</span> <span class="n">Manual</span> <span class="n">coupling</span> <span class="n">Gantried</span> <span class="n">Axes</span>
	<span class="n">bExecuteCoupleY</span> <span class="o">:</span> <span class="n">BOOL</span><span class="p">;</span>
	<span class="n">bExecuteCoupleX</span> <span class="o">:</span> <span class="n">BOOL</span><span class="p">;</span>
	<span class="n">bExecuteDecoupleY</span> <span class="o">:</span> <span class="n">BOOL</span><span class="p">;</span>
	<span class="n">bExecuteDecoupleX</span> <span class="o">:</span> <span class="n">BOOL</span><span class="p">;</span>
<span class="n">END_VAR</span>
<span class="n">VAR</span>
	<span class="o">//</span> <span class="n">STO</span> <span class="n">Button</span>
	<span class="n">bSTOEnable1</span> <span class="n">AT</span> <span class="o">%</span><span class="n">I</span><span class="o">*</span> <span class="o">:</span> <span class="n">BOOL</span><span class="p">;</span>
	<span class="n">bSTOEnable2</span> <span class="n">AT</span> <span class="o">%</span><span class="n">I</span><span class="o">*</span> <span class="o">:</span> <span class="n">BOOL</span><span class="p">;</span>

	<span class="o">//</span> <span class="n">Encoders</span>
	<span class="n">stYupEnc</span> <span class="n">AT</span> <span class="o">%</span><span class="n">I</span><span class="o">*</span> <span class="o">:</span> <span class="n">ST_RenishawAbsEnc</span><span class="p">;</span>
	<span class="n">stYdwnEnc</span> <span class="n">AT</span> <span class="o">%</span><span class="n">I</span><span class="o">*</span> <span class="o">:</span> <span class="n">ST_RenishawAbsEnc</span><span class="p">;</span>
	
	<span class="n">stXupEnc</span> <span class="n">AT</span> <span class="o">%</span><span class="n">I</span><span class="o">*</span> <span class="o">:</span> <span class="n">ST_RenishawAbsEnc</span><span class="p">;</span>
	<span class="n">stXdwnEnc</span> <span class="n">AT</span> <span class="o">%</span><span class="n">I</span><span class="o">*</span> <span class="o">:</span> <span class="n">ST_RenishawAbsEnc</span><span class="p">;</span>

	<span class="o">//</span> <span class="n">Autocoupling</span> <span class="n">Gantried</span> <span class="n">Axes</span>
	<span class="n">fbAutoCoupleY</span> <span class="o">:</span> <span class="n">FB_GantryAutoCoupling</span><span class="p">;</span>
	<span class="n">fbAutoCoupleX</span> <span class="o">:</span> <span class="n">FB_GantryAutoCoupling</span><span class="p">;</span>
<span class="n">END_VAR</span>
<span class="o">//</span> <span class="n">Encoder</span> <span class="n">Reference</span> <span class="n">Values</span>
<span class="n">stYupEnc</span><span class="p">.</span><span class="n">Ref</span> <span class="o">:=</span> <span class="n">nYupEncRef</span><span class="p">;</span>
<span class="n">stYdwnEnc</span><span class="p">.</span><span class="n">Ref</span> <span class="o">:=</span> <span class="n">nYdwnEncRef</span><span class="p">;</span>
<span class="n">stXupEnc</span><span class="p">.</span><span class="n">Ref</span> <span class="o">:=</span> <span class="n">nXupEncRef</span><span class="p">;</span>
<span class="n">stXdwnEnc</span><span class="p">.</span><span class="n">Ref</span> <span class="o">:=</span> <span class="n">nXdwnEncRef</span><span class="p">;</span>

<span class="o">//</span> <span class="n">Gantry</span> <span class="n">Differences</span> <span class="k">to</span> <span class="n">monitor</span>
<span class="n">nCurrGantryY</span> <span class="o">:=</span> <span class="p">((</span><span class="n">ULINT_TO_LINT</span><span class="p">(</span><span class="n">stYupEnc</span><span class="p">.</span><span class="n">Count</span><span class="p">)</span> <span class="o">-</span> <span class="n">ULINT_TO_LINT</span><span class="p">(</span><span class="n">stYupEnc</span><span class="p">.</span><span class="n">Ref</span><span class="p">))</span> <span class="o">-</span> <span class="p">(</span><span class="n">ULINT_TO_LINT</span><span class="p">(</span><span class="n">stYdwnEnc</span><span class="p">.</span><span class="n">Count</span><span class="p">)</span> <span class="o">-</span> <span class="n">ULINT_TO_LINT</span><span class="p">(</span><span class="n">stYdwnEnc</span><span class="p">.</span><span class="n">Ref</span><span class="p">)));</span>
<span class="n">nCurrGantryX</span> <span class="o">:=</span> <span class="p">((</span><span class="n">ULINT_TO_LINT</span><span class="p">(</span><span class="n">stXupEnc</span><span class="p">.</span><span class="n">Count</span><span class="p">)</span> <span class="o">-</span> <span class="n">ULINT_TO_LINT</span><span class="p">(</span><span class="n">stXupEnc</span><span class="p">.</span><span class="n">Ref</span><span class="p">))</span> <span class="o">-</span> <span class="p">(</span><span class="n">ULINT_TO_LINT</span><span class="p">(</span><span class="n">stXdwnEnc</span><span class="p">.</span><span class="n">Count</span><span class="p">)</span> <span class="o">-</span> <span class="n">ULINT_TO_LINT</span><span class="p">(</span><span class="n">stXdwnEnc</span><span class="p">.</span><span class="n">Ref</span><span class="p">)));</span>

<span class="o">//</span> <span class="n">Release</span> <span class="n">the</span> <span class="n">hounds</span><span class="o">!</span>
<span class="n">stYup</span><span class="p">.</span><span class="n">bHardwareEnable</span> <span class="o">:=</span> <span class="n">bSTOEnable1</span> <span class="k">AND</span> <span class="n">bSTOEnable2</span><span class="p">;</span>
<span class="n">stYdwn</span><span class="p">.</span><span class="n">bHardwareEnable</span> <span class="o">:=</span> <span class="n">bSTOEnable1</span> <span class="k">AND</span> <span class="n">bSTOEnable2</span><span class="p">;</span>
<span class="n">stXup</span><span class="p">.</span><span class="n">bHardwareEnable</span> <span class="o">:=</span> <span class="n">bSTOEnable1</span> <span class="k">AND</span> <span class="n">bSTOEnable2</span><span class="p">;</span>
<span class="n">stXdwn</span><span class="p">.</span><span class="n">bHardwareEnable</span> <span class="o">:=</span> <span class="n">bSTOEnable1</span> <span class="k">AND</span> <span class="n">bSTOEnable2</span><span class="p">;</span>
<span class="n">stPitch</span><span class="p">.</span><span class="n">bHardwareEnable</span> <span class="o">:=</span> <span class="n">bSTOEnable1</span> <span class="k">AND</span> <span class="n">bSTOEnable2</span><span class="p">;</span>

<span class="o">//</span> <span class="n">Start</span> <span class="n">Autocoupling</span>
<span class="n">fbAutoCoupleY</span><span class="p">(</span><span class="n">nGantryTol</span><span class="o">:=</span><span class="n">nGantryTolY</span><span class="p">,</span>
	          <span class="n">Master</span><span class="o">:=</span><span class="n">stYup</span><span class="p">,</span>
			  <span class="n">MasterEnc</span><span class="o">:=</span> <span class="n">stYupEnc</span><span class="p">,</span>
			  <span class="n">Slave</span><span class="o">:=</span><span class="n">stYdwn</span><span class="p">,</span>
			  <span class="n">SlaveEnc</span><span class="o">:=</span><span class="n">stYdwnEnc</span><span class="p">,</span>
			  <span class="n">bExecuteCouple</span><span class="o">:=</span><span class="n">bExecuteCoupleY</span><span class="p">,</span>
			  <span class="n">bExecuteDecouple</span><span class="o">:=</span><span class="n">bExecuteDecoupleY</span><span class="p">,</span>
			  <span class="n">bGantryAlreadyCoupled</span><span class="o">=&gt;</span><span class="n">bGantryAlreadyCoupledY</span><span class="p">);</span>

<span class="n">fbAutoCoupleX</span><span class="p">(</span><span class="n">nGantryTol</span><span class="o">:=</span><span class="n">nGantryTolX</span><span class="p">,</span>
	          <span class="n">Master</span><span class="o">:=</span><span class="n">stXup</span><span class="p">,</span>
			  <span class="n">MasterEnc</span><span class="o">:=</span> <span class="n">stXupEnc</span><span class="p">,</span>
			  <span class="n">Slave</span><span class="o">:=</span><span class="n">stXdwn</span><span class="p">,</span>
			  <span class="n">SlaveEnc</span><span class="o">:=</span><span class="n">stXdwnEnc</span><span class="p">,</span>
			  <span class="n">bExecuteCouple</span><span class="o">:=</span><span class="n">bExecuteCoupleX</span><span class="p">,</span>
			  <span class="n">bExecuteDecouple</span><span class="o">:=</span><span class="n">bExecuteDecoupleX</span><span class="p">,</span>
			  <span class="n">bGantryAlreadyCoupled</span><span class="o">=&gt;</span><span class="n">bGantryAlreadyCoupledX</span><span class="p">);</span>

<span class="n">END_FUNCTION_BLOCK</span>
</pre></div>
</div>
</div>
<div class="section" id="pou-mc-smoothmover">
<h2>POU: MC_SmoothMover<a class="headerlink" href="#pou-mc-smoothmover" title="Permalink to this headline">¶</a></h2>
<p>File: lcls_twincat_optics_plc/POUs/Helpers/MC_SmoothMover.TcPOU</p>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span><span class="n">FUNCTION_BLOCK</span> <span class="n">MC_SmoothMover</span>
<span class="n">VAR_IN_OUT</span>
	<span class="n">Axis</span>	<span class="o">:</span>	<span class="n">AXIS_REF</span><span class="p">;</span>
<span class="n">END_VAR</span>
<span class="n">VAR_INPUT</span>
	<span class="n">Velocity</span> <span class="o">:</span> <span class="n">LREAL</span><span class="p">;</span>
	<span class="n">ReqAbsPos</span> <span class="o">:</span> <span class="n">LREAL</span><span class="p">;</span> <span class="o">//</span><span class="k">New</span> <span class="n">requested</span> <span class="n">position</span>
	<span class="n">Enable</span>	<span class="o">:</span>	<span class="n">BOOL</span><span class="p">;</span> <span class="o">//</span><span class="k">While</span> <span class="n">true</span> <span class="n">the</span> <span class="k">block</span> <span class="n">will</span> <span class="n">accept</span> <span class="k">new</span> <span class="n">positions</span> <span class="k">and</span> <span class="n">attempt</span> <span class="k">to</span> <span class="n">move</span> <span class="k">to</span> <span class="n">them</span> <span class="k">if</span> <span class="n">they</span> <span class="n">are</span> <span class="n">different</span>
	<span class="n">Execute</span>	<span class="o">:</span>	<span class="n">BOOL</span><span class="p">;</span> <span class="o">//</span><span class="n">Will</span> <span class="n">retry</span> <span class="n">a</span> <span class="n">move</span> <span class="k">if</span> <span class="n">the</span> <span class="n">target</span> <span class="n">position</span> <span class="k">is</span> <span class="n">the</span> <span class="n">same</span>
<span class="n">END_VAR</span>
<span class="n">VAR_OUTPUT</span>
	<span class="n">Done</span>	<span class="o">:</span>	<span class="n">BOOL</span><span class="p">;</span>
	<span class="n">Busy</span>	<span class="o">:</span>	<span class="n">BOOL</span><span class="p">;</span>
	<span class="n">Error</span>	<span class="o">:</span>	<span class="n">BOOL</span><span class="p">;</span>
<span class="n">END_VAR</span>
<span class="n">VAR</span>
	<span class="n">mcMoveAbsolute</span> <span class="o">:</span> <span class="k">ARRAY</span><span class="p">[</span><span class="mi">1</span><span class="p">..</span><span class="mi">2</span><span class="p">]</span> <span class="k">OF</span> <span class="n">MC_MoveAbsolute</span><span class="p">;</span>
	<span class="n">iI</span><span class="o">:</span> <span class="n">INT</span><span class="p">;</span>
	<span class="n">imcBlockIndex</span><span class="o">:</span> <span class="n">INT</span><span class="p">;</span>
	<span class="n">ReqAbsPosPrevious</span>	<span class="o">:</span> <span class="n">LREAL</span><span class="p">;</span>
	<span class="n">rtExecute</span><span class="o">:</span> <span class="n">R_TRIG</span><span class="p">;</span>
<span class="n">END_VAR</span>
<span class="p">(</span><span class="o">*</span> <span class="n">Smooth</span> <span class="n">Mover</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">8</span><span class="o">-</span><span class="mi">30</span>
<span class="n">A</span><span class="p">.</span> <span class="n">Wallace</span>

<span class="n">Enable</span> <span class="n">means</span> <span class="n">the</span> <span class="k">block</span> <span class="n">will</span> <span class="n">always</span> <span class="n">aquire</span> <span class="k">new</span> <span class="n">positions</span> <span class="n">as</span> <span class="n">they</span> <span class="n">are</span> <span class="n">updated</span><span class="p">.</span> <span class="n">Execute</span>
<span class="n">can</span> <span class="n">be</span> <span class="n">used</span> <span class="k">to</span> <span class="n">retry</span> <span class="n">a</span> <span class="n">move</span><span class="p">.</span> <span class="n">Axis</span> <span class="n">must</span> <span class="n">be</span> <span class="n">enabled</span> <span class="n">by</span> <span class="n">a</span> <span class="n">power</span> <span class="k">block</span><span class="p">.</span>
<span class="o">*</span><span class="p">)</span>


<span class="n">rtExecute</span><span class="p">(</span><span class="n">CLK</span><span class="o">:=</span><span class="n">Execute</span><span class="p">);</span>

<span class="k">IF</span> <span class="p">(</span> <span class="p">(</span><span class="n">ReqAbsPos</span> <span class="o">&lt;&gt;</span> <span class="n">ReqAbsPosPrevious</span> <span class="k">AND</span> <span class="n">Enable</span><span class="p">)</span> <span class="k">OR</span> <span class="n">rtExecute</span><span class="p">.</span><span class="n">Q</span><span class="p">)</span> <span class="k">THEN</span>
			<span class="n">mcMoveAbsolute</span><span class="p">[</span><span class="n">imcBlockIndex</span><span class="p">].</span><span class="n">Execute</span> <span class="o">:=</span> <span class="n">FALSE</span><span class="p">;</span>
			<span class="n">imcBlockIndex</span> <span class="o">:=</span> <span class="n">imcBlockIndex</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
			<span class="k">IF</span> <span class="n">imcBlockIndex</span> <span class="o">&gt;</span><span class="mi">2</span> <span class="k">THEN</span> <span class="n">imcBlockIndex</span> <span class="o">:=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">END_IF</span>
			<span class="n">mcMoveAbsolute</span><span class="p">[</span><span class="n">imcBlockIndex</span><span class="p">].</span><span class="n">Position</span> <span class="o">:=</span> <span class="n">ReqAbsPos</span><span class="p">;</span>
			<span class="n">mcMoveAbsolute</span><span class="p">[</span><span class="n">imcBlockIndex</span><span class="p">].</span><span class="n">Execute</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">;</span>
			<span class="n">ReqAbsPosPrevious</span> <span class="o">:=</span> <span class="n">ReqAbsPos</span><span class="p">;</span>
		<span class="k">ELSIF</span> <span class="n">mcMoveAbsolute</span><span class="p">[</span><span class="n">imcBlockIndex</span><span class="p">].</span><span class="n">Done</span> <span class="k">OR</span> 
				<span class="n">mcMoveAbsolute</span><span class="p">[</span><span class="n">imcBlockIndex</span><span class="p">].</span><span class="n">CommandAborted</span> <span class="k">OR</span> 
				<span class="n">mcMoveAbsolute</span><span class="p">[</span><span class="n">imcBlockIndex</span><span class="p">].</span><span class="n">Busy</span> <span class="k">OR</span> 
				<span class="n">mcMoveAbsolute</span><span class="p">[</span><span class="n">imcBlockIndex</span><span class="p">].</span><span class="n">Error</span> <span class="k">THEN</span>
			<span class="n">mcMoveAbsolute</span><span class="p">[</span><span class="n">imcBlockIndex</span><span class="p">].</span><span class="n">Execute</span> <span class="o">:=</span> <span class="n">FALSE</span><span class="p">;</span>
		<span class="n">END_IF</span>
		
<span class="k">FOR</span> <span class="n">iI</span> <span class="o">:=</span> <span class="mi">1</span> <span class="k">TO</span> <span class="mi">2</span> <span class="n">DO</span>
	<span class="n">mcMoveAbsolute</span><span class="p">[</span><span class="n">iI</span><span class="p">](</span><span class="n">Axis</span> <span class="o">:=</span> <span class="n">Axis</span><span class="p">,</span> <span class="n">Velocity</span><span class="o">:=</span><span class="n">Velocity</span><span class="p">,</span> <span class="n">BufferMode</span><span class="o">:=</span><span class="n">MC_Aborting</span><span class="p">);</span>
<span class="n">END_FOR</span>

<span class="n">Error</span> <span class="o">:=</span> <span class="n">mcMoveAbsolute</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">Error</span> <span class="k">OR</span> <span class="n">mcMoveAbsolute</span><span class="p">[</span><span class="mi">2</span><span class="p">].</span><span class="n">Error</span><span class="p">;</span>
<span class="n">Done</span> <span class="n">S</span><span class="o">=</span> <span class="n">mcMoveAbsolute</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">Done</span> <span class="k">OR</span> <span class="n">mcMoveAbsolute</span><span class="p">[</span><span class="mi">2</span><span class="p">].</span><span class="n">Done</span><span class="p">;</span>
<span class="n">Busy</span> <span class="o">:=</span> <span class="n">mcMoveAbsolute</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">Busy</span> <span class="k">OR</span> <span class="n">mcMoveAbsolute</span><span class="p">[</span><span class="mi">2</span><span class="p">].</span><span class="n">Busy</span><span class="p">;</span>
<span class="n">Done</span> <span class="n">R</span><span class="o">=</span> <span class="n">Busy</span> <span class="k">OR</span> <span class="n">Error</span><span class="p">;</span>

<span class="n">END_FUNCTION_BLOCK</span>
</pre></div>
</div>
</div>
<div class="section" id="pou-main">
<h2>POU: Main<a class="headerlink" href="#pou-main" title="Permalink to this headline">¶</a></h2>
<p>File: lcls_twincat_optics_plc/POUs/Main.TcPOU</p>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span><span class="n">PROGRAM</span> <span class="n">Main</span>
<span class="n">VAR</span>
	<span class="p">(</span><span class="o">*</span>
	<span class="o">//</span> <span class="n">Test</span> <span class="n">Pitch</span> <span class="n">Control</span>
	<span class="n">fbPitchControl</span> <span class="o">:</span> <span class="n">FB_PitchControl</span><span class="p">;</span>
	<span class="n">TestPitch</span> <span class="o">:</span> <span class="n">HOMS_PitchMechanism</span> <span class="o">:=</span> <span class="p">(</span><span class="n">ReqPosLimHi</span><span class="o">:=</span><span class="mi">2000</span><span class="p">,</span>
		                                <span class="n">ReqPosLimLo</span><span class="o">:=-</span><span class="mi">2000</span><span class="p">,</span>
		                                <span class="n">diEncPosLimHi</span><span class="o">:=</span><span class="mi">10768330</span><span class="p">,</span>
		                                <span class="n">diEncPosLimLo</span><span class="o">:=</span><span class="mi">8141680</span><span class="p">);</span>
	<span class="n">M1</span> <span class="o">:</span> <span class="n">DUT_MotionStage</span><span class="p">;</span>
	<span class="n">bPitchDone</span> <span class="o">:</span> <span class="n">BOOL</span><span class="p">;</span>
	<span class="o">*</span><span class="p">)</span>

	<span class="o">//</span> <span class="n">Test</span> <span class="n">Bender</span> <span class="n">vs</span> <span class="n">No</span> <span class="n">Bender</span>
	<span class="n">TESTWithBender</span> <span class="o">:</span> <span class="n">DUT_HOMS</span><span class="p">;</span>
	<span class="n">M1</span> <span class="o">:</span> <span class="n">DUT_MotionStage</span> <span class="o">:=</span> <span class="p">(</span><span class="n">nEnableMode</span><span class="o">:=</span><span class="n">ENUM_StageEnableMode</span><span class="p">.</span><span class="n">ALWAYS</span><span class="p">);</span>
	<span class="n">M2</span> <span class="o">:</span> <span class="n">DUT_MotionStage</span> <span class="o">:=</span> <span class="p">(</span><span class="n">nEnableMode</span><span class="o">:=</span><span class="n">ENUM_StageEnableMode</span><span class="p">.</span><span class="n">ALWAYS</span><span class="p">);</span>
	<span class="n">M3</span> <span class="o">:</span> <span class="n">DUT_MotionStage</span> <span class="o">:=</span> <span class="p">(</span><span class="n">nEnableMode</span><span class="o">:=</span><span class="n">ENUM_StageEnableMode</span><span class="p">.</span><span class="n">ALWAYS</span><span class="p">);</span>
	<span class="n">M4</span> <span class="o">:</span> <span class="n">DUT_MotionStage</span> <span class="o">:=</span> <span class="p">(</span><span class="n">nEnableMode</span><span class="o">:=</span><span class="n">ENUM_StageEnableMode</span><span class="p">.</span><span class="n">ALWAYS</span><span class="p">);</span>
	<span class="n">M5</span> <span class="o">:</span> <span class="n">DUT_MotionStage</span> <span class="o">:=</span> <span class="p">(</span><span class="n">nEnableMode</span><span class="o">:=</span><span class="n">ENUM_StageEnableMode</span><span class="p">.</span><span class="n">ALWAYS</span><span class="p">);</span>
	<span class="n">M6</span> <span class="o">:</span> <span class="n">DUT_MotionStage</span> <span class="o">:=</span> <span class="p">(</span><span class="n">nEnableMode</span><span class="o">:=</span><span class="n">ENUM_StageEnableMode</span><span class="p">.</span><span class="n">ALWAYS</span><span class="p">);</span>
	<span class="n">fbBender</span> <span class="o">:</span> <span class="n">FB_Bender</span><span class="p">;</span>

	<span class="n">fbMotionStage_m1</span> <span class="o">:</span> <span class="n">FB_MotionStage</span><span class="p">;</span>
	<span class="n">fbMotionStage_m2</span> <span class="o">:</span> <span class="n">FB_MotionStage</span><span class="p">;</span>
	<span class="n">fbMotionStage_m3</span> <span class="o">:</span> <span class="n">FB_MotionStage</span><span class="p">;</span>
	<span class="n">fbMotionStage_m4</span> <span class="o">:</span> <span class="n">FB_MotionStage</span><span class="p">;</span>
	<span class="n">fbMotionStage_m6</span> <span class="o">:</span> <span class="n">FB_MotionStage</span><span class="p">;</span>
<span class="n">END_VAR</span>
<span class="p">(</span><span class="o">*</span>
<span class="o">//</span> <span class="n">Test</span> <span class="n">Pitch</span> <span class="n">Control</span>
<span class="n">M1</span><span class="p">.</span><span class="n">bLimitBackwardEnable</span><span class="p">;</span>
<span class="n">M1</span><span class="p">.</span><span class="n">bLimitForwardEnable</span><span class="p">;</span>
<span class="n">M1</span><span class="p">.</span><span class="n">bHardwareEnable</span><span class="p">;</span>
<span class="n">M1</span><span class="p">.</span><span class="n">fVelocity</span> <span class="o">:=</span> <span class="mi">150</span><span class="p">.</span><span class="mi">0</span><span class="p">;</span>
<span class="n">fbPitchControl</span><span class="p">(</span><span class="n">Pitch</span><span class="o">:=</span><span class="n">TestPitch</span><span class="p">,</span>
			   <span class="n">Stepper</span><span class="o">:=</span><span class="n">M1</span><span class="p">,</span>
			   <span class="n">lrCurrentSetpoint</span><span class="o">:=</span><span class="n">M1</span><span class="p">.</span><span class="n">fPosition</span><span class="p">,</span>
			   <span class="n">q_bDone</span><span class="o">=&gt;</span><span class="n">bPitchDone</span><span class="p">,</span>
			   <span class="n">q_bBusy</span><span class="o">=&gt;</span><span class="p">);</span>
<span class="k">IF</span> <span class="k">NOT</span> <span class="n">M1</span><span class="p">.</span><span class="n">bHardwareEnable</span> <span class="k">THEN</span>
	<span class="n">M1</span><span class="p">.</span><span class="n">fPosition</span> <span class="o">:=</span> <span class="n">M1</span><span class="p">.</span><span class="n">stAxisStatus</span><span class="p">.</span><span class="n">fActPosition</span><span class="p">;</span>
<span class="n">END_IF</span>
<span class="o">*</span><span class="p">)</span>

<span class="o">//</span> <span class="n">Test</span> <span class="n">Bender</span> <span class="n">vs</span><span class="p">.</span> <span class="n">No</span> <span class="n">Bender</span><span class="o">:</span>
<span class="o">//</span> <span class="n">M1L0</span>
<span class="n">M1</span><span class="p">.</span><span class="n">bLimitForwardEnable</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">;</span>
<span class="n">M1</span><span class="p">.</span><span class="n">bLimitBackwardEnable</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">;</span>
<span class="n">M1</span><span class="p">.</span><span class="n">bPowerSelf</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">;</span>

<span class="n">M2</span><span class="p">.</span><span class="n">bLimitForwardEnable</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">;</span>
<span class="n">M2</span><span class="p">.</span><span class="n">bLimitBackwardEnable</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">;</span>
<span class="n">M2</span><span class="p">.</span><span class="n">bPowerSelf</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">;</span>

<span class="n">M3</span><span class="p">.</span><span class="n">bLimitForwardEnable</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">;</span>
<span class="n">M3</span><span class="p">.</span><span class="n">bLimitBackwardEnable</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">;</span>
<span class="n">M3</span><span class="p">.</span><span class="n">bPowerSelf</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">;</span>

<span class="n">M4</span><span class="p">.</span><span class="n">bLimitForwardEnable</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">;</span>
<span class="n">M4</span><span class="p">.</span><span class="n">bLimitBackwardEnable</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">;</span>
<span class="n">M4</span><span class="p">.</span><span class="n">bPowerSelf</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">;</span>

<span class="n">M5</span><span class="p">.</span><span class="n">bLimitForwardEnable</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">;</span>
<span class="n">M5</span><span class="p">.</span><span class="n">bLimitBackwardEnable</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">;</span>
<span class="n">M5</span><span class="p">.</span><span class="n">bPowerSelf</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">;</span>

<span class="n">M6</span><span class="p">.</span><span class="n">bLimitForwardEnable</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">;</span>
<span class="n">M6</span><span class="p">.</span><span class="n">bLimitBackwardEnable</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">;</span>
<span class="n">M6</span><span class="p">.</span><span class="n">bPowerSelf</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">;</span>
<span class="n">TESTWithBender</span><span class="p">.</span><span class="n">fbRunHOMS</span><span class="p">(</span><span class="n">stYup</span><span class="o">:=</span><span class="n">M1</span><span class="p">,</span>
                         <span class="n">stYdwn</span><span class="o">:=</span><span class="n">M2</span><span class="p">,</span>
                         <span class="n">stXup</span><span class="o">:=</span><span class="n">M3</span><span class="p">,</span>
                         <span class="n">stXdwn</span><span class="o">:=</span><span class="n">M4</span><span class="p">,</span>
                         <span class="n">stPitch</span><span class="o">:=</span><span class="n">M5</span><span class="p">,</span>
	                     <span class="n">nYupEncRef</span><span class="o">:=</span><span class="mi">0</span><span class="p">,</span>
                         <span class="n">nYdwnEncRef</span><span class="o">:=</span><span class="mi">0</span><span class="p">,</span>
                         <span class="n">nXupEncRef</span><span class="o">:=</span><span class="mi">0</span><span class="p">,</span>
                         <span class="n">nXdwnEncRef</span><span class="o">:=</span><span class="mi">0</span><span class="p">,</span>
			             <span class="n">bExecuteCoupleY</span><span class="o">:=</span><span class="n">TESTWithBender</span><span class="p">.</span><span class="n">bExecuteCoupleY</span><span class="p">,</span>
                         <span class="n">bExecuteCoupleX</span><span class="o">:=</span><span class="n">TESTWithBender</span><span class="p">.</span><span class="n">bExecuteCoupleX</span><span class="p">,</span>
			             <span class="n">bExecuteDecoupleY</span><span class="o">:=</span><span class="n">TESTWithBender</span><span class="p">.</span><span class="n">bExecuteDecoupleY</span><span class="p">,</span>
                         <span class="n">bExecuteDecoupleX</span><span class="o">:=</span><span class="n">TESTWithBender</span><span class="p">.</span><span class="n">bExecuteDecoupleX</span><span class="p">,</span>
                         <span class="n">bGantryAlreadyCoupledY</span><span class="o">=&gt;</span><span class="n">TESTWithBender</span><span class="p">.</span><span class="n">bGantryAlreadyCoupledY</span><span class="p">,</span>
                         <span class="n">bGantryAlreadyCoupledX</span><span class="o">=&gt;</span><span class="n">TESTWithBender</span><span class="p">.</span><span class="n">bGantryAlreadyCoupledX</span><span class="p">,</span>
                         <span class="n">nCurrGantryY</span><span class="o">=&gt;</span><span class="n">TESTWithBender</span><span class="p">.</span><span class="n">nCurrGantryY</span><span class="p">,</span>
                         <span class="n">nCurrGantryX</span><span class="o">=&gt;</span><span class="n">TESTWithBender</span><span class="p">.</span><span class="n">nCurrGantryX</span><span class="p">);</span>
<span class="n">fbBender</span><span class="p">(</span><span class="n">stBender</span><span class="o">:=</span><span class="n">M6</span><span class="p">,</span>
	     <span class="n">bSTOEnable1</span><span class="o">:=</span><span class="n">TESTWithBender</span><span class="p">.</span><span class="n">fbRunHOMS</span><span class="p">.</span><span class="n">bSTOEnable1</span><span class="p">,</span>
		 <span class="n">bSTOEnable2</span><span class="o">:=</span><span class="n">TESTWithBender</span><span class="p">.</span><span class="n">fbRunHOMS</span><span class="p">.</span><span class="n">bSTOEnable2</span><span class="p">);</span>

<span class="n">fbMotionStage_m1</span><span class="p">(</span><span class="n">stMotionStage</span><span class="o">:=</span><span class="n">M1</span><span class="p">);</span>
<span class="n">fbMotionStage_m2</span><span class="p">(</span><span class="n">stMotionStage</span><span class="o">:=</span><span class="n">M2</span><span class="p">);</span>
<span class="n">fbMotionStage_m3</span><span class="p">(</span><span class="n">stMotionStage</span><span class="o">:=</span><span class="n">M3</span><span class="p">);</span>
<span class="n">fbMotionStage_m4</span><span class="p">(</span><span class="n">stMotionStage</span><span class="o">:=</span><span class="n">M4</span><span class="p">);</span>
<span class="n">fbMotionStage_m6</span><span class="p">(</span><span class="n">stMotionStage</span><span class="o">:=</span><span class="n">M6</span><span class="p">);</span>

<span class="n">END_PROGRAM</span>
</pre></div>
</div>
</div>
<div class="section" id="pou-test-pitchcontrol">
<h2>POU: TEST_PitchControl<a class="headerlink" href="#pou-test-pitchcontrol" title="Permalink to this headline">¶</a></h2>
<p>File: lcls_twincat_optics_plc/POUs/Tests/TEST_PitchControl.TcPOU</p>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span>{attribute &#39;call_after_init&#39;}
FUNCTION_BLOCK TEST_PitchControl EXTENDS TcUnit.FB_TestSuite
VAR_INPUT
END_VAR
VAR_OUTPUT
END_VAR
VAR
END_VAR
LimitSwitches();

END_FUNCTION_BLOCK
</pre></div>
</div>
</div>
<div class="section" id="pou-withinrange">
<h2>POU: WithinRange<a class="headerlink" href="#pou-withinrange" title="Permalink to this headline">¶</a></h2>
<p>File: lcls_twincat_optics_plc/POUs/Helpers/WithinRange.TcPOU</p>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span><span class="k">FUNCTION</span> <span class="n">WithinRange</span> <span class="o">:</span> <span class="n">BOOL</span>
<span class="n">VAR_INPUT</span>
	<span class="n">ValA</span>	<span class="o">:</span>	<span class="n">REAL</span><span class="p">;</span> <span class="o">//</span><span class="k">New</span> <span class="n">position</span> <span class="k">to</span> <span class="n">evaluate</span>
	<span class="n">Center</span> <span class="o">:</span>	<span class="n">REAL</span><span class="p">;</span> <span class="o">//</span><span class="n">Current</span> <span class="n">position</span>
	<span class="k">Range</span> <span class="o">:</span> <span class="n">REAL</span><span class="p">;</span> <span class="o">//</span><span class="n">Span</span> <span class="k">of</span> <span class="n">the</span> <span class="k">range</span>
	<span class="n">Offset</span>	<span class="o">:</span>	<span class="n">REAL</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="o">//</span><span class="n">Offset</span> <span class="n">from</span> <span class="n">center</span> <span class="k">if</span> <span class="n">the</span> <span class="k">range</span> <span class="k">is</span> <span class="n">non</span><span class="o">-</span><span class="n">symetric</span>
<span class="n">END_VAR</span>
<span class="n">VAR</span>
<span class="n">END_VAR</span>
<span class="k">IF</span> <span class="n">ValA</span> <span class="o">&lt;</span> <span class="p">(</span><span class="n">Center</span> <span class="o">+</span> <span class="n">Offset</span> <span class="o">-</span> <span class="p">(</span><span class="k">Range</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span> <span class="p">)</span> <span class="k">THEN</span>
	<span class="n">WithinRange</span> <span class="o">:=</span> <span class="n">FALSE</span><span class="p">;</span>
<span class="k">ELSIF</span> <span class="n">ValA</span> <span class="o">&gt;</span> <span class="p">(</span><span class="n">Center</span> <span class="o">+</span> <span class="n">Offset</span> <span class="o">+</span> <span class="p">(</span><span class="k">Range</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span> <span class="p">)</span> <span class="k">THEN</span>
	<span class="n">WithinRange</span> <span class="o">:=</span> <span class="n">FALSE</span><span class="p">;</span>
<span class="k">ELSE</span>
	<span class="n">WithinRange</span> <span class="o">:=</span> <span class="n">TRUE</span><span class="p">;</span>
<span class="n">END_IF</span>

<span class="n">END_FUNCTION</span>
</pre></div>
</div>
</div>
<div class="section" id="symbols">
<h2>Symbols<a class="headerlink" href="#symbols" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">.</span><span class="n">TCPADS_MAXUDP_BUFFSIZE</span> <span class="p">:</span> <span class="n">UDINT</span> <span class="p">(</span><span class="mi">4339520</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Constants</span><span class="o">.</span><span class="n">CompilerVersion</span> <span class="p">:</span> <span class="n">VERSION</span> <span class="p">(</span><span class="mi">9367072</span> <span class="mi">64</span><span class="p">)</span>
<span class="n">Constants</span><span class="o">.</span><span class="n">CompilerVersionNumeric</span> <span class="p">:</span> <span class="n">DWORD</span> <span class="p">(</span><span class="mi">9367200</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Constants</span><span class="o">.</span><span class="n">RuntimeVersion</span> <span class="p">:</span> <span class="n">VERSION</span> <span class="p">(</span><span class="mi">9367008</span> <span class="mi">64</span><span class="p">)</span>
<span class="n">Constants</span><span class="o">.</span><span class="n">RuntimeVersionNumeric</span> <span class="p">:</span> <span class="n">DWORD</span> <span class="p">(</span><span class="mi">9367168</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Constants</span><span class="o">.</span><span class="n">bFPUSupport</span> <span class="p">:</span> <span class="n">BOOL</span> <span class="p">(</span><span class="mi">9367136</span> <span class="mi">8</span><span class="p">)</span>
<span class="n">Constants</span><span class="o">.</span><span class="n">bLittleEndian</span> <span class="p">:</span> <span class="n">BOOL</span> <span class="p">(</span><span class="mi">4343344</span> <span class="mi">8</span><span class="p">)</span>
<span class="n">Constants</span><span class="o">.</span><span class="n">bSimulationMode</span> <span class="p">:</span> <span class="n">BOOL</span> <span class="p">(</span><span class="mi">4343352</span> <span class="mi">8</span><span class="p">)</span>
<span class="n">Constants</span><span class="o">.</span><span class="n">nPackMode</span> <span class="p">:</span> <span class="n">UINT</span> <span class="p">(</span><span class="mi">9364208</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">Constants</span><span class="o">.</span><span class="n">nRegisterSize</span> <span class="p">:</span> <span class="n">WORD</span> <span class="p">(</span><span class="mi">9364192</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">DefaultGlobals</span><span class="o">.</span><span class="n">fTimeStamp</span> <span class="p">:</span> <span class="n">LREAL</span> <span class="p">(</span><span class="mi">4311360</span> <span class="mi">64</span><span class="p">)</span>
<span class="n">DefaultGlobals</span><span class="o">.</span><span class="n">stSys</span> <span class="p">:</span> <span class="n">LCLS_General</span><span class="o">.</span><span class="n">ST_System</span> <span class="p">(</span><span class="mi">4311264</span> <span class="mi">88</span><span class="p">)</span>
<span class="n">GVL</span><span class="o">.</span><span class="n">nLangId_OnlineMonitoring</span> <span class="p">:</span> <span class="n">DINT</span> <span class="p">(</span><span class="mi">4339936</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">GVL_Constants</span><span class="o">.</span><span class="n">cPiezoMaxVoltage</span> <span class="p">:</span> <span class="n">LREAL</span> <span class="p">(</span><span class="mi">9364032</span> <span class="mi">64</span><span class="p">)</span>
<span class="n">GVL_Constants</span><span class="o">.</span><span class="n">cPiezoMinVoltage</span> <span class="p">:</span> <span class="n">LREAL</span> <span class="p">(</span><span class="mi">9364096</span> <span class="mi">64</span><span class="p">)</span>
<span class="n">GVL_Constants</span><span class="o">.</span><span class="n">cPiezoRange</span> <span class="p">:</span> <span class="n">REAL</span> <span class="p">(</span><span class="mi">9364160</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">GVL_Constants</span><span class="o">.</span><span class="n">nGANTRY_TOLERANCE_NM_DEFAULT</span> <span class="p">:</span> <span class="n">LINT</span> <span class="p">(</span><span class="mi">9363968</span> <span class="mi">64</span><span class="p">)</span>
<span class="n">GVL_INTERNAL</span><span class="o">.</span><span class="n">UNINITIALIZED_CLASS_GUID</span> <span class="p">:</span> <span class="n">GUID</span> <span class="p">(</span><span class="mi">4340288</span> <span class="mi">128</span><span class="p">)</span>
<span class="n">GVL_Logger</span><span class="o">.</span><span class="n">TCPADS_MAXUDP_BUFFSIZE</span> <span class="p">:</span> <span class="n">UDINT</span> <span class="p">(</span><span class="mi">4312256</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">GVL_Logger</span><span class="o">.</span><span class="n">cLogHost</span> <span class="p">:</span> <span class="n">STRING</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span> <span class="p">(</span><span class="mi">4311424</span> <span class="mi">128</span><span class="p">)</span>
<span class="n">GVL_Logger</span><span class="o">.</span><span class="n">fbRootLogger</span> <span class="p">:</span> <span class="n">LCLS_General</span><span class="o">.</span><span class="n">FB_LogMessage</span> <span class="p">(</span><span class="mi">4312288</span> <span class="mi">26944</span><span class="p">)</span>
<span class="n">GVL_Logger</span><span class="o">.</span><span class="n">iLogPort</span> <span class="p">:</span> <span class="n">UINT</span> <span class="p">(</span><span class="mi">4302832</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">GVL_Logger</span><span class="o">.</span><span class="n">sIpTidbit</span> <span class="p">:</span> <span class="n">STRING</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span> <span class="p">(</span><span class="mi">4311552</span> <span class="mi">56</span><span class="p">)</span>
<span class="n">GVL_Logger</span><span class="o">.</span><span class="n">sPlcHostname</span> <span class="p">:</span> <span class="n">STRING</span><span class="p">(</span><span class="mi">80</span><span class="p">)</span> <span class="p">(</span><span class="mi">4311608</span> <span class="mi">648</span><span class="p">)</span>
<span class="n">GVL_Param_TcUnit</span><span class="o">.</span><span class="n">MaxNumberOfAsserts</span> <span class="p">:</span> <span class="n">UINT</span> <span class="p">(</span><span class="mi">4340720</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">GVL_Param_TcUnit</span><span class="o">.</span><span class="n">MaxNumberOfTestSuites</span> <span class="p">:</span> <span class="n">UINT</span> <span class="p">(</span><span class="mi">4339728</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">GVL_Param_TcUnit</span><span class="o">.</span><span class="n">MaxNumberOfTestsForEachTestSuite</span> <span class="p">:</span> <span class="n">UINT</span> <span class="p">(</span><span class="mi">4340704</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">GVL_TcUnit</span><span class="o">.</span><span class="n">AdsLogger</span> <span class="p">:</span> <span class="n">TcUnit</span><span class="o">.</span><span class="n">FB_ADSLogStringMessageFifoQueue</span> <span class="p">(</span><span class="mi">4359360</span> <span class="mi">4128864</span><span class="p">)</span>
<span class="n">GVL_TcUnit</span><span class="o">.</span><span class="n">CurrentTestNameBeingCalled</span> <span class="p">:</span> <span class="n">Tc2_System</span><span class="o">.</span><span class="n">T_MaxString</span> <span class="p">(</span><span class="mi">4341280</span> <span class="mi">2048</span><span class="p">)</span>
<span class="n">GVL_TcUnit</span><span class="o">.</span><span class="n">CurrentTestSuiteBeingCalled</span> <span class="p">:</span> <span class="n">POINTER</span> <span class="n">TO</span> <span class="n">TcUnit</span><span class="o">.</span><span class="n">FB_TestSuite</span> <span class="p">(</span><span class="mi">4341248</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">GVL_TcUnit</span><span class="o">.</span><span class="n">IgnoreCurrentTest</span> <span class="p">:</span> <span class="n">BOOL</span> <span class="p">(</span><span class="mi">4302824</span> <span class="mi">8</span><span class="p">)</span>
<span class="n">GVL_TcUnit</span><span class="o">.</span><span class="n">NumberOfInitializedTestSuites</span> <span class="p">:</span> <span class="n">UINT</span> <span class="p">(</span><span class="mi">4343328</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">GVL_TcUnit</span><span class="o">.</span><span class="n">TcUnitRunner</span> <span class="p">:</span> <span class="n">TcUnit</span><span class="o">.</span><span class="n">FB_TcUnitRunner</span> <span class="p">(</span><span class="mi">4340736</span> <span class="mi">512</span><span class="p">)</span>
<span class="n">GVL_TcUnit</span><span class="o">.</span><span class="n">TestSuiteAddresses</span> <span class="p">:</span> <span class="n">ARRAY</span><span class="p">[</span><span class="mf">1.</span><span class="o">.</span><span class="mi">500</span><span class="p">]</span> <span class="n">OF</span> <span class="n">POINTER</span> <span class="n">TO</span> <span class="n">TcUnit</span><span class="o">.</span><span class="n">FB_TestSuite</span> <span class="p">(</span><span class="mi">4343360</span> <span class="mi">16000</span><span class="p">)</span>
<span class="n">GVL_TcUnit</span><span class="o">.</span><span class="n">TestSuiteIsRegistered</span> <span class="p">:</span> <span class="n">BOOL</span> <span class="p">(</span><span class="mi">4301112</span> <span class="mi">8</span><span class="p">)</span>
<span class="n">GVL_TestStructs</span><span class="o">.</span><span class="n">TestPitch_LimitSwitches</span> <span class="p">:</span> <span class="n">HOMS_PitchMechanism</span> <span class="p">(</span><span class="mi">9364224</span> <span class="mi">2496</span><span class="p">)</span>
<span class="n">GVL_TestStructs</span><span class="o">.</span><span class="n">TestPitch_LimitSwitches</span><span class="o">.</span><span class="n">diEncCnt</span> <span class="p">:</span> <span class="n">LINT</span> <span class="p">(</span><span class="mi">9366656</span> <span class="mi">64</span><span class="p">)</span>
<span class="n">Global_Constants</span><span class="o">.</span><span class="n">EMPTY_EVENT_CLASS</span> <span class="p">:</span> <span class="n">GUID</span> <span class="p">(</span><span class="mi">4339552</span> <span class="mi">128</span><span class="p">)</span>
<span class="n">Global_Constants</span><span class="o">.</span><span class="n">EMPTY_EVENT_ID</span> <span class="p">:</span> <span class="n">UDINT</span> <span class="p">(</span><span class="mi">4339680</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Constants</span><span class="o">.</span><span class="n">EMPTY_SEVERITY</span> <span class="p">:</span> <span class="n">TcEventSeverity</span> <span class="p">(</span><span class="mi">4339712</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">Global_Constants</span><span class="o">.</span><span class="n">SUCCESS_EVENT</span> <span class="p">:</span> <span class="n">TcEventEntry</span> <span class="p">(</span><span class="mi">4339744</span> <span class="mi">192</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">ADSIGRP_DEVICE_DATA</span> <span class="p">:</span> <span class="n">UDINT</span> <span class="p">(</span><span class="mi">4097664</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">ADSIGRP_IOIMAGE_CLEARI</span> <span class="p">:</span> <span class="n">UDINT</span> <span class="p">(</span><span class="mi">4097568</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">ADSIGRP_IOIMAGE_CLEARO</span> <span class="p">:</span> <span class="n">UDINT</span> <span class="p">(</span><span class="mi">4097600</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">ADSIGRP_IOIMAGE_RISIZE</span> <span class="p">:</span> <span class="n">UDINT</span> <span class="p">(</span><span class="mi">4097440</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">ADSIGRP_IOIMAGE_ROSIZE</span> <span class="p">:</span> <span class="n">UDINT</span> <span class="p">(</span><span class="mi">4097536</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">ADSIGRP_IOIMAGE_RWIB</span> <span class="p">:</span> <span class="n">UDINT</span> <span class="p">(</span><span class="mi">4097376</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">ADSIGRP_IOIMAGE_RWIOB</span> <span class="p">:</span> <span class="n">UDINT</span> <span class="p">(</span><span class="mi">4097632</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">ADSIGRP_IOIMAGE_RWIX</span> <span class="p">:</span> <span class="n">UDINT</span> <span class="p">(</span><span class="mi">4097408</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">ADSIGRP_IOIMAGE_RWOB</span> <span class="p">:</span> <span class="n">UDINT</span> <span class="p">(</span><span class="mi">4097472</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">ADSIGRP_IOIMAGE_RWOX</span> <span class="p">:</span> <span class="n">UDINT</span> <span class="p">(</span><span class="mi">4097504</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">ADSIGRP_SYMNAME</span> <span class="p">:</span> <span class="n">UDINT</span> <span class="p">(</span><span class="mi">4096960</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">ADSIGRP_SYMNOTE</span> <span class="p">:</span> <span class="n">UDINT</span> <span class="p">(</span><span class="mi">4097344</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">ADSIGRP_SYMTAB</span> <span class="p">:</span> <span class="n">UDINT</span> <span class="p">(</span><span class="mi">4096928</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">ADSIGRP_SYMVAL</span> <span class="p">:</span> <span class="n">UDINT</span> <span class="p">(</span><span class="mi">4096992</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">ADSIGRP_SYM_DOWNLOAD</span> <span class="p">:</span> <span class="n">UDINT</span> <span class="p">(</span><span class="mi">4097248</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">ADSIGRP_SYM_HNDBYNAME</span> <span class="p">:</span> <span class="n">UDINT</span> <span class="p">(</span><span class="mi">4097024</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">ADSIGRP_SYM_INFOBYNAME</span> <span class="p">:</span> <span class="n">UDINT</span> <span class="p">(</span><span class="mi">4097152</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">ADSIGRP_SYM_INFOBYNAMEEX</span> <span class="p">:</span> <span class="n">UDINT</span> <span class="p">(</span><span class="mi">4097216</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">ADSIGRP_SYM_RELEASEHND</span> <span class="p">:</span> <span class="n">UDINT</span> <span class="p">(</span><span class="mi">4097120</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">ADSIGRP_SYM_UPLOAD</span> <span class="p">:</span> <span class="n">UDINT</span> <span class="p">(</span><span class="mi">4097280</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">ADSIGRP_SYM_UPLOADINFO</span> <span class="p">:</span> <span class="n">UDINT</span> <span class="p">(</span><span class="mi">4097312</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">ADSIGRP_SYM_VALBYHND</span> <span class="p">:</span> <span class="n">UDINT</span> <span class="p">(</span><span class="mi">4097088</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">ADSIGRP_SYM_VALBYNAME</span> <span class="p">:</span> <span class="n">UDINT</span> <span class="p">(</span><span class="mi">4097056</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">ADSIGRP_SYM_VERSION</span> <span class="p">:</span> <span class="n">UDINT</span> <span class="p">(</span><span class="mi">4097184</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">ADSIOFFS_DEVDATA_ADSSTATE</span> <span class="p">:</span> <span class="n">UDINT</span> <span class="p">(</span><span class="mi">4097696</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">ADSIOFFS_DEVDATA_DEVSTATE</span> <span class="p">:</span> <span class="n">UDINT</span> <span class="p">(</span><span class="mi">4097728</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">ADSLOG_MSGTYPE_ERROR</span> <span class="p">:</span> <span class="n">DWORD</span> <span class="p">(</span><span class="mi">4098784</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">ADSLOG_MSGTYPE_HINT</span> <span class="p">:</span> <span class="n">DWORD</span> <span class="p">(</span><span class="mi">4098720</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">ADSLOG_MSGTYPE_LOG</span> <span class="p">:</span> <span class="n">DWORD</span> <span class="p">(</span><span class="mi">4098816</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">ADSLOG_MSGTYPE_MSGBOX</span> <span class="p">:</span> <span class="n">DWORD</span> <span class="p">(</span><span class="mi">4098848</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">ADSLOG_MSGTYPE_RESOURCE</span> <span class="p">:</span> <span class="n">DWORD</span> <span class="p">(</span><span class="mi">4098880</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">ADSLOG_MSGTYPE_STRING</span> <span class="p">:</span> <span class="n">DWORD</span> <span class="p">(</span><span class="mi">4098912</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">ADSLOG_MSGTYPE_WARN</span> <span class="p">:</span> <span class="n">DWORD</span> <span class="p">(</span><span class="mi">4098752</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">ADSSTATE_CONFIG</span> <span class="p">:</span> <span class="n">UINT</span> <span class="p">(</span><span class="mi">4096832</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">ADSSTATE_ERROR</span> <span class="p">:</span> <span class="n">UINT</span> <span class="p">(</span><span class="mi">4096768</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">ADSSTATE_EXCEPTION</span> <span class="p">:</span> <span class="n">UINT</span> <span class="p">(</span><span class="mi">4096896</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">ADSSTATE_IDLE</span> <span class="p">:</span> <span class="n">UINT</span> <span class="p">(</span><span class="mi">4096608</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">ADSSTATE_INCOMPATIBLE</span> <span class="p">:</span> <span class="n">UINT</span> <span class="p">(</span><span class="mi">4096880</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">ADSSTATE_INIT</span> <span class="p">:</span> <span class="n">UINT</span> <span class="p">(</span><span class="mi">4096640</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">ADSSTATE_INVALID</span> <span class="p">:</span> <span class="n">UINT</span> <span class="p">(</span><span class="mi">4096592</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">ADSSTATE_LOADCFG</span> <span class="p">:</span> <span class="n">UINT</span> <span class="p">(</span><span class="mi">4096720</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">ADSSTATE_MAXSTATES</span> <span class="p">:</span> <span class="n">UINT</span> <span class="p">(</span><span class="mi">4096912</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">ADSSTATE_POWERFAILURE</span> <span class="p">:</span> <span class="n">UINT</span> <span class="p">(</span><span class="mi">4096736</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">ADSSTATE_POWERGOOD</span> <span class="p">:</span> <span class="n">UINT</span> <span class="p">(</span><span class="mi">4096752</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">ADSSTATE_RECONFIG</span> <span class="p">:</span> <span class="n">UINT</span> <span class="p">(</span><span class="mi">4096848</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">ADSSTATE_RESET</span> <span class="p">:</span> <span class="n">UINT</span> <span class="p">(</span><span class="mi">4096624</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">ADSSTATE_RESUME</span> <span class="p">:</span> <span class="n">UINT</span> <span class="p">(</span><span class="mi">4096816</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">ADSSTATE_RUN</span> <span class="p">:</span> <span class="n">UINT</span> <span class="p">(</span><span class="mi">4096672</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">ADSSTATE_SAVECFG</span> <span class="p">:</span> <span class="n">UINT</span> <span class="p">(</span><span class="mi">4096704</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">ADSSTATE_SHUTDOWN</span> <span class="p">:</span> <span class="n">UINT</span> <span class="p">(</span><span class="mi">4096784</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">ADSSTATE_START</span> <span class="p">:</span> <span class="n">UINT</span> <span class="p">(</span><span class="mi">4096656</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">ADSSTATE_STOP</span> <span class="p">:</span> <span class="n">UINT</span> <span class="p">(</span><span class="mi">4096688</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">ADSSTATE_STOPPING</span> <span class="p">:</span> <span class="n">UINT</span> <span class="p">(</span><span class="mi">4096864</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">ADSSTATE_SUSPEND</span> <span class="p">:</span> <span class="n">UINT</span> <span class="p">(</span><span class="mi">4096800</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">AMSLOGGER_IGR_GENERAL</span> <span class="p">:</span> <span class="n">UDINT</span> <span class="p">(</span><span class="mi">4164608</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">AMSLOGGER_IOF_MODE</span> <span class="p">:</span> <span class="n">UDINT</span> <span class="p">(</span><span class="mi">4164640</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">AMSPORT_AMSLOGGER</span> <span class="p">:</span> <span class="n">UINT</span> <span class="p">(</span><span class="mi">4164672</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">AMSPORT_EVENTLOG</span> <span class="p">:</span> <span class="n">UINT</span> <span class="p">(</span><span class="mi">4096304</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">AMSPORT_LOGGER</span> <span class="p">:</span> <span class="n">UINT</span> <span class="p">(</span><span class="mi">4096288</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">AMSPORT_R0_CAM</span> <span class="p">:</span> <span class="n">UINT</span> <span class="p">(</span><span class="mi">4096528</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">AMSPORT_R0_CAMTOOL</span> <span class="p">:</span> <span class="n">UINT</span> <span class="p">(</span><span class="mi">4096544</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">AMSPORT_R0_CNC</span> <span class="p">:</span> <span class="n">UINT</span> <span class="p">(</span><span class="mi">4096416</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">AMSPORT_R0_IO</span> <span class="p">:</span> <span class="n">UINT</span> <span class="p">(</span><span class="mi">4096336</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">AMSPORT_R0_ISG</span> <span class="p">:</span> <span class="n">UINT</span> <span class="p">(</span><span class="mi">4096400</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">AMSPORT_R0_LINE</span> <span class="p">:</span> <span class="n">UINT</span> <span class="p">(</span><span class="mi">4096432</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">AMSPORT_R0_NC</span> <span class="p">:</span> <span class="n">UINT</span> <span class="p">(</span><span class="mi">4096352</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">AMSPORT_R0_NCSAF</span> <span class="p">:</span> <span class="n">UINT</span> <span class="p">(</span><span class="mi">4096368</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">AMSPORT_R0_NCSVB</span> <span class="p">:</span> <span class="n">UINT</span> <span class="p">(</span><span class="mi">4096384</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">AMSPORT_R0_PLC</span> <span class="p">:</span> <span class="n">UINT</span> <span class="p">(</span><span class="mi">4096448</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">AMSPORT_R0_PLC_RTS1</span> <span class="p">:</span> <span class="n">UINT</span> <span class="p">(</span><span class="mi">4096464</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">AMSPORT_R0_PLC_RTS2</span> <span class="p">:</span> <span class="n">UINT</span> <span class="p">(</span><span class="mi">4096480</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">AMSPORT_R0_PLC_RTS3</span> <span class="p">:</span> <span class="n">UINT</span> <span class="p">(</span><span class="mi">4096496</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">AMSPORT_R0_PLC_RTS4</span> <span class="p">:</span> <span class="n">UINT</span> <span class="p">(</span><span class="mi">4096512</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">AMSPORT_R0_RTIME</span> <span class="p">:</span> <span class="n">UINT</span> <span class="p">(</span><span class="mi">4096320</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">AMSPORT_R3_SCOPESERVER</span> <span class="p">:</span> <span class="n">UINT</span> <span class="p">(</span><span class="mi">4096576</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">AMSPORT_R3_SYSSERV</span> <span class="p">:</span> <span class="n">UINT</span> <span class="p">(</span><span class="mi">4096560</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">BOOTDATAFLAGS_PERSISTENT_INVALID</span> <span class="p">:</span> <span class="n">BYTE</span> <span class="p">(</span><span class="mi">4098976</span> <span class="mi">8</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">BOOTDATAFLAGS_PERSISTENT_LOADED</span> <span class="p">:</span> <span class="n">BYTE</span> <span class="p">(</span><span class="mi">4098968</span> <span class="mi">8</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">BOOTDATAFLAGS_RETAIN_INVALID</span> <span class="p">:</span> <span class="n">BYTE</span> <span class="p">(</span><span class="mi">4098952</span> <span class="mi">8</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">BOOTDATAFLAGS_RETAIN_LOADED</span> <span class="p">:</span> <span class="n">BYTE</span> <span class="p">(</span><span class="mi">4098944</span> <span class="mi">8</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">BOOTDATAFLAGS_RETAIN_REQUESTED</span> <span class="p">:</span> <span class="n">BYTE</span> <span class="p">(</span><span class="mi">4098960</span> <span class="mi">8</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">DATE_AND_TIME_SECPERDAY</span> <span class="p">:</span> <span class="n">DWORD</span> <span class="p">(</span><span class="mi">4177568</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">DATE_AND_TIME_SECPERWEEK</span> <span class="p">:</span> <span class="n">DWORD</span> <span class="p">(</span><span class="mi">4177600</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">DBG_OUTPUT_FILE</span> <span class="p">:</span> <span class="n">DWORD</span> <span class="p">(</span><span class="mi">4183872</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">DBG_OUTPUT_LOG</span> <span class="p">:</span> <span class="n">DWORD</span> <span class="p">(</span><span class="mi">4183840</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">DBG_OUTPUT_NONE</span> <span class="p">:</span> <span class="n">DWORD</span> <span class="p">(</span><span class="mi">4183808</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">DBG_OUTPUT_VISU</span> <span class="p">:</span> <span class="n">DWORD</span> <span class="p">(</span><span class="mi">4183904</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">DEFAULT_ADS_TIMEOUT</span> <span class="p">:</span> <span class="n">TIME</span> <span class="p">(</span><span class="mi">4099712</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">DEFAULT_BACKLASHVALUE</span> <span class="p">:</span> <span class="n">LREAL</span> <span class="p">(</span><span class="mi">4310912</span> <span class="mi">64</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">DEFAULT_CSV_FIELD_DOUBLE_QUOTE</span> <span class="p">:</span> <span class="n">BYTE</span> <span class="p">(</span><span class="mi">4163352</span> <span class="mi">8</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">DEFAULT_CSV_FIELD_SEP</span> <span class="p">:</span> <span class="n">BYTE</span> <span class="p">(</span><span class="mi">4101376</span> <span class="mi">8</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">DEFAULT_CSV_RECORD_SEP_CR</span> <span class="p">:</span> <span class="n">BYTE</span> <span class="p">(</span><span class="mi">4300144</span> <span class="mi">8</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">DEFAULT_CSV_RECORD_SEP_LF</span> <span class="p">:</span> <span class="n">BYTE</span> <span class="p">(</span><span class="mi">4300152</span> <span class="mi">8</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">DEFAULT_HOME_POSITION</span> <span class="p">:</span> <span class="n">LREAL</span> <span class="p">(</span><span class="mi">4310848</span> <span class="mi">64</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">EMPTY_ARG_VALUE</span> <span class="p">:</span> <span class="n">Tc2_Utilities</span><span class="o">.</span><span class="n">T_Arg</span> <span class="p">(</span><span class="mi">4165248</span> <span class="mi">96</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">EMPTY_GUID_REGSTRING</span> <span class="p">:</span> <span class="n">STRING</span><span class="p">(</span><span class="mi">38</span><span class="p">)</span> <span class="p">(</span><span class="mi">4303272</span> <span class="mi">312</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">EMPTY_GUID_STRING</span> <span class="p">:</span> <span class="n">STRING</span><span class="p">(</span><span class="mi">36</span><span class="p">)</span> <span class="p">(</span><span class="mi">4302976</span> <span class="mi">296</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">EMPTY_GUID_STRUCT</span> <span class="p">:</span> <span class="n">GUID</span> <span class="p">(</span><span class="mi">4302848</span> <span class="mi">128</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">EMPTY_ROUTE_ENTRY</span> <span class="p">:</span> <span class="n">Tc2_Utilities</span><span class="o">.</span><span class="n">ST_AmsRouteEntry</span> <span class="p">(</span><span class="mi">4163360</span> <span class="mi">1184</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">FLOATREC_EXP_IS_INF</span> <span class="p">:</span> <span class="n">INT</span> <span class="p">(</span><span class="mi">4164720</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">FLOATREC_EXP_IS_NAN</span> <span class="p">:</span> <span class="n">INT</span> <span class="p">(</span><span class="mi">4164704</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">FLOATREC_MAX_DIGITS</span> <span class="p">:</span> <span class="n">INT</span> <span class="p">(</span><span class="mi">4164736</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">FLOATREC_MAX_PRECISION</span> <span class="p">:</span> <span class="n">INT</span> <span class="p">(</span><span class="mi">4164752</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">FLOATREC_MIN_PRECISION</span> <span class="p">:</span> <span class="n">INT</span> <span class="p">(</span><span class="mi">4164768</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">FMTERR_ARGTYPEINVALID</span> <span class="p">:</span> <span class="n">DWORD</span> <span class="p">(</span><span class="mi">4165088</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">FMTERR_ASTERISKPOSITION</span> <span class="p">:</span> <span class="n">DWORD</span> <span class="p">(</span><span class="mi">4164864</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">FMTERR_DESTBUFFOVERFLOW</span> <span class="p">:</span> <span class="n">DWORD</span> <span class="p">(</span><span class="mi">4165184</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">FMTERR_FLAGPOSITION</span> <span class="p">:</span> <span class="n">DWORD</span> <span class="p">(</span><span class="mi">4164960</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">FMTERR_INSUFFICIENTARGS</span> <span class="p">:</span> <span class="n">DWORD</span> <span class="p">(</span><span class="mi">4165152</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">FMTERR_INVALIDPOINTERINPUT</span> <span class="p">:</span> <span class="n">DWORD</span> <span class="p">(</span><span class="mi">4165216</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">FMTERR_NOERROR</span> <span class="p">:</span> <span class="n">DWORD</span> <span class="p">(</span><span class="mi">4164800</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">FMTERR_PERCENTSIGNPOSITION</span> <span class="p">:</span> <span class="n">DWORD</span> <span class="p">(</span><span class="mi">4164832</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">FMTERR_PRECISIONDOTPOSITION</span> <span class="p">:</span> <span class="n">DWORD</span> <span class="p">(</span><span class="mi">4165024</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">FMTERR_PRECISIONVALUE</span> <span class="p">:</span> <span class="n">DWORD</span> <span class="p">(</span><span class="mi">4164928</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">FMTERR_TYPEFIELDVALUE</span> <span class="p">:</span> <span class="n">DWORD</span> <span class="p">(</span><span class="mi">4165056</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">FMTERR_UNACCEPTEDPARAMETER</span> <span class="p">:</span> <span class="n">DWORD</span> <span class="p">(</span><span class="mi">4165120</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">FMTERR_WIDTHPRECISIONVALPOS</span> <span class="p">:</span> <span class="n">DWORD</span> <span class="p">(</span><span class="mi">4164992</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">FMTERR_WIDTHVALUE</span> <span class="p">:</span> <span class="n">DWORD</span> <span class="p">(</span><span class="mi">4164896</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">FOPEN_MODEAPPEND</span> <span class="p">:</span> <span class="n">DWORD</span> <span class="p">(</span><span class="mi">4099072</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">FOPEN_MODEBINARY</span> <span class="p">:</span> <span class="n">DWORD</span> <span class="p">(</span><span class="mi">4099136</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">FOPEN_MODEPLUS</span> <span class="p">:</span> <span class="n">DWORD</span> <span class="p">(</span><span class="mi">4099104</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">FOPEN_MODEREAD</span> <span class="p">:</span> <span class="n">DWORD</span> <span class="p">(</span><span class="mi">4099008</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">FOPEN_MODETEXT</span> <span class="p">:</span> <span class="n">DWORD</span> <span class="p">(</span><span class="mi">4099168</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">FOPEN_MODEWRITE</span> <span class="p">:</span> <span class="n">DWORD</span> <span class="p">(</span><span class="mi">4099040</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">FORMAT_DECASC_CODES</span> <span class="p">:</span> <span class="n">ARRAY</span><span class="p">[</span><span class="mf">0.</span><span class="o">.</span><span class="mi">9</span><span class="p">]</span> <span class="n">OF</span> <span class="n">BYTE</span> <span class="p">(</span><span class="mi">4165600</span> <span class="mi">80</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">FORMAT_HEXASC_CODES</span> <span class="p">:</span> <span class="n">ARRAY</span><span class="p">[</span><span class="mf">0.</span><span class="o">.</span><span class="mi">1</span><span class="p">]</span> <span class="n">OF</span> <span class="n">BYTE</span> <span class="p">(</span><span class="mi">4165344</span> <span class="mi">256</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">FORMAT_MAX_ARGS</span> <span class="p">:</span> <span class="n">INT</span> <span class="p">(</span><span class="mi">4164688</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">GLOBAL_DCF77_PULSE_SPLIT</span> <span class="p">:</span> <span class="n">TIME</span> <span class="p">(</span><span class="mi">4101344</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">GLOBAL_DCF77_SEQUENCE_CHECK</span> <span class="p">:</span> <span class="n">BOOL</span> <span class="p">(</span><span class="mi">4101224</span> <span class="mi">8</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">GLOBAL_FORMAT_HASH_PREFIX_TYPE</span> <span class="p">:</span> <span class="n">Tc2_Utilities</span><span class="o">.</span><span class="n">E_HashPrefixTypes</span> <span class="p">(</span><span class="mi">4101312</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">GLOBAL_SBCS_TABLE</span> <span class="p">:</span> <span class="n">Tc2_Utilities</span><span class="o">.</span><span class="n">E_SBCSType</span> <span class="p">(</span><span class="mi">4101328</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">HKEY_MAX_BINARY_DATA_SIZE</span> <span class="p">:</span> <span class="n">UDINT</span> <span class="p">(</span><span class="mi">4164576</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">IPHELPERAPI_ADAPTERSINFO</span> <span class="p">:</span> <span class="n">UDINT</span> <span class="p">(</span><span class="mi">4163040</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">IPHELPERAPI_IPADDRBYHOSTNAME</span> <span class="p">:</span> <span class="n">UDINT</span> <span class="p">(</span><span class="mi">4163072</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">MAX_ADAPTER_ADDRESS_LENGTH</span> <span class="p">:</span> <span class="n">UDINT</span> <span class="p">(</span><span class="mi">4162944</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">MAX_ADAPTER_DESCRIPTION_LENGTH</span> <span class="p">:</span> <span class="n">UDINT</span> <span class="p">(</span><span class="mi">4162912</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">MAX_ADAPTER_NAME_LENGTH</span> <span class="p">:</span> <span class="n">UDINT</span> <span class="p">(</span><span class="mi">4162880</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">MAX_AVERAGE_MEASURES</span> <span class="p">:</span> <span class="n">INT</span> <span class="p">(</span><span class="mi">4101232</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">MAX_LOCAL_ADAPTERS</span> <span class="p">:</span> <span class="n">UDINT</span> <span class="p">(</span><span class="mi">4163104</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">MAX_REMOTE_PCS</span> <span class="p">:</span> <span class="n">INT</span> <span class="p">(</span><span class="mi">4101392</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">MAX_ROUTE_ADDR_LEN</span> <span class="p">:</span> <span class="n">BYTE</span> <span class="p">(</span><span class="mi">4163328</span> <span class="mi">8</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">MAX_ROUTE_NAME_LEN</span> <span class="p">:</span> <span class="n">BYTE</span> <span class="p">(</span><span class="mi">4101384</span> <span class="mi">8</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">MAX_ROUTE_TRANSPORT</span> <span class="p">:</span> <span class="n">BYTE</span> <span class="p">(</span><span class="mi">4163344</span> <span class="mi">8</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">MAX_STRING_LENGTH</span> <span class="p">:</span> <span class="n">UDINT</span> <span class="p">(</span><span class="mi">4099744</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">MIN_ROUTE_TRANSPORT</span> <span class="p">:</span> <span class="n">BYTE</span> <span class="p">(</span><span class="mi">4163336</span> <span class="mi">8</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">PI</span> <span class="p">:</span> <span class="n">LREAL</span> <span class="p">(</span><span class="mi">4099648</span> <span class="mi">64</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">ROUTE_FLAG_DYNAMIC</span> <span class="p">:</span> <span class="n">DWORD</span> <span class="p">(</span><span class="mi">4163264</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">ROUTE_FLAG_NOOVERRIDE</span> <span class="p">:</span> <span class="n">DWORD</span> <span class="p">(</span><span class="mi">4163296</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">ROUTE_FLAG_TEMPORARY</span> <span class="p">:</span> <span class="n">DWORD</span> <span class="p">(</span><span class="mi">4163232</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">SYSTEMSERVICE_ADDREMOTE</span> <span class="p">:</span> <span class="n">UDINT</span> <span class="p">(</span><span class="mi">4163136</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">SYSTEMSERVICE_CHANGENETID</span> <span class="p">:</span> <span class="n">UDINT</span> <span class="p">(</span><span class="mi">4098528</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">SYSTEMSERVICE_CLOSEHANDLE</span> <span class="p">:</span> <span class="n">UDINT</span> <span class="p">(</span><span class="mi">4097888</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">SYSTEMSERVICE_CREATEFILE</span> <span class="p">:</span> <span class="n">UDINT</span> <span class="p">(</span><span class="mi">4097856</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">SYSTEMSERVICE_DELREMOTE</span> <span class="p">:</span> <span class="n">UDINT</span> <span class="p">(</span><span class="mi">4163168</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">SYSTEMSERVICE_ENUMREMOTE</span> <span class="p">:</span> <span class="n">UDINT</span> <span class="p">(</span><span class="mi">4163200</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">SYSTEMSERVICE_FCLOSE</span> <span class="p">:</span> <span class="n">UDINT</span> <span class="p">(</span><span class="mi">4097952</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">SYSTEMSERVICE_FDELETE</span> <span class="p">:</span> <span class="n">UDINT</span> <span class="p">(</span><span class="mi">4098272</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">SYSTEMSERVICE_FEOF</span> <span class="p">:</span> <span class="n">UDINT</span> <span class="p">(</span><span class="mi">4098240</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">SYSTEMSERVICE_FFILEFIND</span> <span class="p">:</span> <span class="n">UDINT</span> <span class="p">(</span><span class="mi">4164544</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">SYSTEMSERVICE_FGETS</span> <span class="p">:</span> <span class="n">UDINT</span> <span class="p">(</span><span class="mi">4098112</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">SYSTEMSERVICE_FOPEN</span> <span class="p">:</span> <span class="n">UDINT</span> <span class="p">(</span><span class="mi">4097920</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">SYSTEMSERVICE_FPRINTF</span> <span class="p">:</span> <span class="n">UDINT</span> <span class="p">(</span><span class="mi">4098208</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">SYSTEMSERVICE_FPUTS</span> <span class="p">:</span> <span class="n">UDINT</span> <span class="p">(</span><span class="mi">4098144</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">SYSTEMSERVICE_FREAD</span> <span class="p">:</span> <span class="n">UDINT</span> <span class="p">(</span><span class="mi">4097984</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">SYSTEMSERVICE_FRENAME</span> <span class="p">:</span> <span class="n">UDINT</span> <span class="p">(</span><span class="mi">4098304</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">SYSTEMSERVICE_FSCANF</span> <span class="p">:</span> <span class="n">UDINT</span> <span class="p">(</span><span class="mi">4098176</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">SYSTEMSERVICE_FSEEK</span> <span class="p">:</span> <span class="n">UDINT</span> <span class="p">(</span><span class="mi">4098048</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">SYSTEMSERVICE_FTELL</span> <span class="p">:</span> <span class="n">UDINT</span> <span class="p">(</span><span class="mi">4098080</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">SYSTEMSERVICE_FWRITE</span> <span class="p">:</span> <span class="n">UDINT</span> <span class="p">(</span><span class="mi">4098016</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">SYSTEMSERVICE_IPHELPERAPI</span> <span class="p">:</span> <span class="n">UDINT</span> <span class="p">(</span><span class="mi">4162976</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">SYSTEMSERVICE_IPHOSTNAME</span> <span class="p">:</span> <span class="n">UDINT</span> <span class="p">(</span><span class="mi">4163008</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">SYSTEMSERVICE_MKDIR</span> <span class="p">:</span> <span class="n">UDINT</span> <span class="p">(</span><span class="mi">4098336</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">SYSTEMSERVICE_OPENCREATE</span> <span class="p">:</span> <span class="n">UDINT</span> <span class="p">(</span><span class="mi">4097760</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">SYSTEMSERVICE_OPENREAD</span> <span class="p">:</span> <span class="n">UDINT</span> <span class="p">(</span><span class="mi">4097792</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">SYSTEMSERVICE_OPENWRITE</span> <span class="p">:</span> <span class="n">UDINT</span> <span class="p">(</span><span class="mi">4097824</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">SYSTEMSERVICE_REG_HKEYLOCALMACHINE</span> <span class="p">:</span> <span class="n">UDINT</span> <span class="p">(</span><span class="mi">4098400</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">SYSTEMSERVICE_RMDIR</span> <span class="p">:</span> <span class="n">UDINT</span> <span class="p">(</span><span class="mi">4098368</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">SYSTEMSERVICE_SENDEMAIL</span> <span class="p">:</span> <span class="n">UDINT</span> <span class="p">(</span><span class="mi">4098432</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">SYSTEMSERVICE_STARTPROCESS</span> <span class="p">:</span> <span class="n">UDINT</span> <span class="p">(</span><span class="mi">4098496</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">SYSTEMSERVICE_TIMESERVICES</span> <span class="p">:</span> <span class="n">UDINT</span> <span class="p">(</span><span class="mi">4098464</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">SYSTEMSTATEFLAGS_BSOD</span> <span class="p">:</span> <span class="n">BYTE</span> <span class="p">(</span><span class="mi">4098984</span> <span class="mi">8</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">SYSTEMSTATEFLAGS_RTVIOLATION</span> <span class="p">:</span> <span class="n">BYTE</span> <span class="p">(</span><span class="mi">4098992</span> <span class="mi">8</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">SYSTEMTIME_DATEDELTA_OFFSET</span> <span class="p">:</span> <span class="n">DWORD</span> <span class="p">(</span><span class="mi">4171936</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">SYSTEMTIME_DATE_AND_TIME_MAX</span> <span class="p">:</span> <span class="n">Tc2_Utilities</span><span class="o">.</span><span class="n">T_ULARGE_INTEGER</span> <span class="p">(</span><span class="mi">4172224</span> <span class="mi">64</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">SYSTEMTIME_DATE_AND_TIME_MAX64</span> <span class="p">:</span> <span class="n">ULINT</span> <span class="p">(</span><span class="mi">4172544</span> <span class="mi">64</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">SYSTEMTIME_DATE_AND_TIME_MIN</span> <span class="p">:</span> <span class="n">Tc2_Utilities</span><span class="o">.</span><span class="n">T_ULARGE_INTEGER</span> <span class="p">(</span><span class="mi">4172160</span> <span class="mi">64</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">SYSTEMTIME_DATE_AND_TIME_MIN64</span> <span class="p">:</span> <span class="n">ULINT</span> <span class="p">(</span><span class="mi">4172480</span> <span class="mi">64</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">SYSTEMTIME_MAX_MONTHDAYS</span> <span class="p">:</span> <span class="n">ARRAY</span><span class="p">[</span><span class="mf">0.</span><span class="o">.</span><span class="mi">1</span><span class="p">]</span> <span class="n">OF</span> <span class="n">WORD</span> <span class="p">(</span><span class="mi">4171088</span> <span class="mi">384</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">SYSTEMTIME_MAX_YEARSDAY</span> <span class="p">:</span> <span class="n">ARRAY</span><span class="p">[</span><span class="mf">0.</span><span class="o">.</span><span class="mi">1</span><span class="p">]</span> <span class="n">OF</span> <span class="n">WORD</span> <span class="p">(</span><span class="mi">4171472</span> <span class="mi">448</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">SYSTEMTIME_TICKSPERDAY</span> <span class="p">:</span> <span class="n">Tc2_Utilities</span><span class="o">.</span><span class="n">T_ULARGE_INTEGER</span> <span class="p">(</span><span class="mi">4172096</span> <span class="mi">64</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">SYSTEMTIME_TICKSPERDAY64</span> <span class="p">:</span> <span class="n">ULINT</span> <span class="p">(</span><span class="mi">4172416</span> <span class="mi">64</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">SYSTEMTIME_TICKSPERMSEC</span> <span class="p">:</span> <span class="n">Tc2_Utilities</span><span class="o">.</span><span class="n">T_ULARGE_INTEGER</span> <span class="p">(</span><span class="mi">4171968</span> <span class="mi">64</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">SYSTEMTIME_TICKSPERMSEC64</span> <span class="p">:</span> <span class="n">ULINT</span> <span class="p">(</span><span class="mi">4172288</span> <span class="mi">64</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">SYSTEMTIME_TICKSPERSEC</span> <span class="p">:</span> <span class="n">Tc2_Utilities</span><span class="o">.</span><span class="n">T_ULARGE_INTEGER</span> <span class="p">(</span><span class="mi">4172032</span> <span class="mi">64</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">SYSTEMTIME_TICKSPERSEC64</span> <span class="p">:</span> <span class="n">ULINT</span> <span class="p">(</span><span class="mi">4172352</span> <span class="mi">64</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">TCEVENTFLAG_AUTOFMTALL</span> <span class="p">:</span> <span class="n">WORD</span> <span class="p">(</span><span class="mi">4099504</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">TCEVENTFLAG_FMTSELF</span> <span class="p">:</span> <span class="n">WORD</span> <span class="p">(</span><span class="mi">4099440</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">TCEVENTFLAG_LOG</span> <span class="p">:</span> <span class="n">WORD</span> <span class="p">(</span><span class="mi">4099456</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">TCEVENTFLAG_MSGBOX</span> <span class="p">:</span> <span class="n">WORD</span> <span class="p">(</span><span class="mi">4099472</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">TCEVENTFLAG_PRIOCLASS</span> <span class="p">:</span> <span class="n">WORD</span> <span class="p">(</span><span class="mi">4099424</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">TCEVENTFLAG_SRCID</span> <span class="p">:</span> <span class="n">WORD</span> <span class="p">(</span><span class="mi">4099488</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">TCEVENTSTATE_CONFIRMED</span> <span class="p">:</span> <span class="n">WORD</span> <span class="p">(</span><span class="mi">4099568</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">TCEVENTSTATE_INVALID</span> <span class="p">:</span> <span class="n">WORD</span> <span class="p">(</span><span class="mi">4099520</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">TCEVENTSTATE_RESET</span> <span class="p">:</span> <span class="n">WORD</span> <span class="p">(</span><span class="mi">4099552</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">TCEVENTSTATE_RESETCON</span> <span class="p">:</span> <span class="n">WORD</span> <span class="p">(</span><span class="mi">4099584</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">TCEVENTSTATE_SIGNALED</span> <span class="p">:</span> <span class="n">WORD</span> <span class="p">(</span><span class="mi">4099536</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">TCEVENT_FMTPRGSIZE</span> <span class="p">:</span> <span class="n">INT</span> <span class="p">(</span><span class="mi">4099616</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">TCEVENT_SRCNAMESIZE</span> <span class="p">:</span> <span class="n">INT</span> <span class="p">(</span><span class="mi">4099600</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">TIMESERVICE_ADJUSTTIMETORTC</span> <span class="p">:</span> <span class="n">UDINT</span> <span class="p">(</span><span class="mi">4098656</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">TIMESERVICE_DATEANDTIME</span> <span class="p">:</span> <span class="n">UDINT</span> <span class="p">(</span><span class="mi">4098560</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">TIMESERVICE_RTCTIMEDIFF</span> <span class="p">:</span> <span class="n">UDINT</span> <span class="p">(</span><span class="mi">4098624</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">TIMESERVICE_SYSTEMTIMES</span> <span class="p">:</span> <span class="n">UDINT</span> <span class="p">(</span><span class="mi">4098592</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">TIMESERVICE_TIMEZONINFORMATION</span> <span class="p">:</span> <span class="n">UDINT</span> <span class="p">(</span><span class="mi">4098688</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">TcMcGlobal</span> <span class="p">:</span> <span class="n">Tc2_MC2</span><span class="o">.</span><span class="n">_TCMCGLOBAL</span> <span class="p">(</span><span class="mi">4303872</span> <span class="mi">6976</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">WEST_EUROPE_TZI</span> <span class="p">:</span> <span class="n">Tc2_Utilities</span><span class="o">.</span><span class="n">ST_TimeZoneInformation</span> <span class="p">(</span><span class="mi">4172608</span> <span class="mi">864</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">eWatchdogConfig</span> <span class="p">:</span> <span class="n">Tc2_System</span><span class="o">.</span><span class="n">E_WATCHDOG_TIME_CONFIG</span> <span class="p">(</span><span class="mi">4099632</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">Global_Variables</span><span class="o">.</span><span class="n">nWatchdogTime</span> <span class="p">:</span> <span class="n">BYTE</span> <span class="p">(</span><span class="mi">4099000</span> <span class="mi">8</span><span class="p">)</span>
<span class="n">Global_Version</span><span class="o">.</span><span class="n">stLibVersion_Tc2_MC2</span> <span class="p">:</span> <span class="n">ST_LibVersion</span> <span class="p">(</span><span class="mi">4303584</span> <span class="mi">288</span><span class="p">)</span>
<span class="n">Global_Version</span><span class="o">.</span><span class="n">stLibVersion_Tc2_Math</span> <span class="p">:</span> <span class="n">ST_LibVersion</span> <span class="p">(</span><span class="mi">4310976</span> <span class="mi">288</span><span class="p">)</span>
<span class="n">Global_Version</span><span class="o">.</span><span class="n">stLibVersion_Tc2_ModbusSrv</span> <span class="p">:</span> <span class="n">ST_LibVersion</span> <span class="p">(</span><span class="mi">4339232</span> <span class="mi">288</span><span class="p">)</span>
<span class="n">Global_Version</span><span class="o">.</span><span class="n">stLibVersion_Tc2_System</span> <span class="p">:</span> <span class="n">ST_LibVersion</span> <span class="p">(</span><span class="mi">4096000</span> <span class="mi">288</span><span class="p">)</span>
<span class="n">Global_Version</span><span class="o">.</span><span class="n">stLibVersion_Tc2_Utilities</span> <span class="p">:</span> <span class="n">ST_LibVersion</span> <span class="p">(</span><span class="mi">4100896</span> <span class="mi">288</span><span class="p">)</span>
<span class="n">Global_Version</span><span class="o">.</span><span class="n">stLibVersion_Tc3_EventLogger</span> <span class="p">:</span> <span class="n">ST_LibVersion</span> <span class="p">(</span><span class="mi">4340000</span> <span class="mi">288</span><span class="p">)</span>
<span class="n">Global_Version</span><span class="o">.</span><span class="n">stLibVersion_Tc3_JsonXml</span> <span class="p">:</span> <span class="n">ST_LibVersion</span> <span class="p">(</span><span class="mi">4340416</span> <span class="mi">288</span><span class="p">)</span>
<span class="n">Global_Version</span><span class="o">.</span><span class="n">stLibVersion_Tc3_Module</span> <span class="p">:</span> <span class="n">ST_LibVersion</span> <span class="p">(</span><span class="mi">4100288</span> <span class="mi">288</span><span class="p">)</span>
<span class="n">Global_Version</span><span class="o">.</span><span class="n">stLibVersion_TcUnit</span> <span class="p">:</span> <span class="n">ST_LibVersion</span> <span class="p">(</span><span class="mi">8488224</span> <span class="mi">288</span><span class="p">)</span>
<span class="n">Global_Version</span><span class="o">.</span><span class="n">stLibVersion_lcls_twincat_optics</span> <span class="p">:</span> <span class="n">ST_LibVersion</span> <span class="p">(</span><span class="mi">9366720</span> <span class="mi">288</span><span class="p">)</span>
<span class="n">LCLS_General</span><span class="o">.</span><span class="n">DefaultGlobals</span><span class="o">.</span><span class="n">stSys</span><span class="o">.</span><span class="n">I_EcatMaster1</span> <span class="p">:</span> <span class="n">AMSNETID</span> <span class="p">(</span><span class="mi">4311304</span> <span class="mi">48</span><span class="p">)</span>
<span class="n">Main</span><span class="o">.</span><span class="n">M1</span> <span class="p">:</span> <span class="n">lcls_twincat_motion</span><span class="o">.</span><span class="n">DUT_MotionStage</span> <span class="p">(</span><span class="mi">8532864</span> <span class="mi">11264</span><span class="p">)</span>
<span class="n">Main</span><span class="o">.</span><span class="n">M1</span><span class="o">.</span><span class="n">Axis</span><span class="o">.</span><span class="n">NcToPlc</span> <span class="p">:</span> <span class="n">NCTOPLC_AXIS_REF</span> <span class="p">(</span><span class="mi">8533952</span> <span class="mi">2048</span><span class="p">)</span>
<span class="n">Main</span><span class="o">.</span><span class="n">M1</span><span class="o">.</span><span class="n">Axis</span><span class="o">.</span><span class="n">PlcToNc</span> <span class="p">:</span> <span class="n">PLCTONC_AXIS_REF</span> <span class="p">(</span><span class="mi">8532928</span> <span class="mi">1024</span><span class="p">)</span>
<span class="n">Main</span><span class="o">.</span><span class="n">M1</span><span class="o">.</span><span class="n">bBrakeRelease</span> <span class="p">:</span> <span class="n">BOOL</span> <span class="p">(</span><span class="mi">8541912</span> <span class="mi">8</span><span class="p">)</span>
<span class="n">Main</span><span class="o">.</span><span class="n">M1</span><span class="o">.</span><span class="n">bHardwareEnable</span> <span class="p">:</span> <span class="n">BOOL</span> <span class="p">(</span><span class="mi">8541920</span> <span class="mi">8</span><span class="p">)</span>
<span class="n">Main</span><span class="o">.</span><span class="n">M1</span><span class="o">.</span><span class="n">bHome</span> <span class="p">:</span> <span class="n">BOOL</span> <span class="p">(</span><span class="mi">8541904</span> <span class="mi">8</span><span class="p">)</span>
<span class="n">Main</span><span class="o">.</span><span class="n">M1</span><span class="o">.</span><span class="n">bLimitBackwardEnable</span> <span class="p">:</span> <span class="n">BOOL</span> <span class="p">(</span><span class="mi">8541896</span> <span class="mi">8</span><span class="p">)</span>
<span class="n">Main</span><span class="o">.</span><span class="n">M1</span><span class="o">.</span><span class="n">bLimitForwardEnable</span> <span class="p">:</span> <span class="n">BOOL</span> <span class="p">(</span><span class="mi">8541888</span> <span class="mi">8</span><span class="p">)</span>
<span class="n">Main</span><span class="o">.</span><span class="n">M2</span> <span class="p">:</span> <span class="n">lcls_twincat_motion</span><span class="o">.</span><span class="n">DUT_MotionStage</span> <span class="p">(</span><span class="mi">8544128</span> <span class="mi">11264</span><span class="p">)</span>
<span class="n">Main</span><span class="o">.</span><span class="n">M2</span><span class="o">.</span><span class="n">Axis</span><span class="o">.</span><span class="n">NcToPlc</span> <span class="p">:</span> <span class="n">NCTOPLC_AXIS_REF</span> <span class="p">(</span><span class="mi">8545216</span> <span class="mi">2048</span><span class="p">)</span>
<span class="n">Main</span><span class="o">.</span><span class="n">M2</span><span class="o">.</span><span class="n">Axis</span><span class="o">.</span><span class="n">PlcToNc</span> <span class="p">:</span> <span class="n">PLCTONC_AXIS_REF</span> <span class="p">(</span><span class="mi">8544192</span> <span class="mi">1024</span><span class="p">)</span>
<span class="n">Main</span><span class="o">.</span><span class="n">M2</span><span class="o">.</span><span class="n">bBrakeRelease</span> <span class="p">:</span> <span class="n">BOOL</span> <span class="p">(</span><span class="mi">8553176</span> <span class="mi">8</span><span class="p">)</span>
<span class="n">Main</span><span class="o">.</span><span class="n">M2</span><span class="o">.</span><span class="n">bHardwareEnable</span> <span class="p">:</span> <span class="n">BOOL</span> <span class="p">(</span><span class="mi">8553184</span> <span class="mi">8</span><span class="p">)</span>
<span class="n">Main</span><span class="o">.</span><span class="n">M2</span><span class="o">.</span><span class="n">bHome</span> <span class="p">:</span> <span class="n">BOOL</span> <span class="p">(</span><span class="mi">8553168</span> <span class="mi">8</span><span class="p">)</span>
<span class="n">Main</span><span class="o">.</span><span class="n">M2</span><span class="o">.</span><span class="n">bLimitBackwardEnable</span> <span class="p">:</span> <span class="n">BOOL</span> <span class="p">(</span><span class="mi">8553160</span> <span class="mi">8</span><span class="p">)</span>
<span class="n">Main</span><span class="o">.</span><span class="n">M2</span><span class="o">.</span><span class="n">bLimitForwardEnable</span> <span class="p">:</span> <span class="n">BOOL</span> <span class="p">(</span><span class="mi">8553152</span> <span class="mi">8</span><span class="p">)</span>
<span class="n">Main</span><span class="o">.</span><span class="n">M3</span> <span class="p">:</span> <span class="n">lcls_twincat_motion</span><span class="o">.</span><span class="n">DUT_MotionStage</span> <span class="p">(</span><span class="mi">8555392</span> <span class="mi">11264</span><span class="p">)</span>
<span class="n">Main</span><span class="o">.</span><span class="n">M3</span><span class="o">.</span><span class="n">Axis</span><span class="o">.</span><span class="n">NcToPlc</span> <span class="p">:</span> <span class="n">NCTOPLC_AXIS_REF</span> <span class="p">(</span><span class="mi">8556480</span> <span class="mi">2048</span><span class="p">)</span>
<span class="n">Main</span><span class="o">.</span><span class="n">M3</span><span class="o">.</span><span class="n">Axis</span><span class="o">.</span><span class="n">PlcToNc</span> <span class="p">:</span> <span class="n">PLCTONC_AXIS_REF</span> <span class="p">(</span><span class="mi">8555456</span> <span class="mi">1024</span><span class="p">)</span>
<span class="n">Main</span><span class="o">.</span><span class="n">M3</span><span class="o">.</span><span class="n">bBrakeRelease</span> <span class="p">:</span> <span class="n">BOOL</span> <span class="p">(</span><span class="mi">8564440</span> <span class="mi">8</span><span class="p">)</span>
<span class="n">Main</span><span class="o">.</span><span class="n">M3</span><span class="o">.</span><span class="n">bHardwareEnable</span> <span class="p">:</span> <span class="n">BOOL</span> <span class="p">(</span><span class="mi">8564448</span> <span class="mi">8</span><span class="p">)</span>
<span class="n">Main</span><span class="o">.</span><span class="n">M3</span><span class="o">.</span><span class="n">bHome</span> <span class="p">:</span> <span class="n">BOOL</span> <span class="p">(</span><span class="mi">8564432</span> <span class="mi">8</span><span class="p">)</span>
<span class="n">Main</span><span class="o">.</span><span class="n">M3</span><span class="o">.</span><span class="n">bLimitBackwardEnable</span> <span class="p">:</span> <span class="n">BOOL</span> <span class="p">(</span><span class="mi">8564424</span> <span class="mi">8</span><span class="p">)</span>
<span class="n">Main</span><span class="o">.</span><span class="n">M3</span><span class="o">.</span><span class="n">bLimitForwardEnable</span> <span class="p">:</span> <span class="n">BOOL</span> <span class="p">(</span><span class="mi">8564416</span> <span class="mi">8</span><span class="p">)</span>
<span class="n">Main</span><span class="o">.</span><span class="n">M4</span> <span class="p">:</span> <span class="n">lcls_twincat_motion</span><span class="o">.</span><span class="n">DUT_MotionStage</span> <span class="p">(</span><span class="mi">8566656</span> <span class="mi">11264</span><span class="p">)</span>
<span class="n">Main</span><span class="o">.</span><span class="n">M4</span><span class="o">.</span><span class="n">Axis</span><span class="o">.</span><span class="n">NcToPlc</span> <span class="p">:</span> <span class="n">NCTOPLC_AXIS_REF</span> <span class="p">(</span><span class="mi">8567744</span> <span class="mi">2048</span><span class="p">)</span>
<span class="n">Main</span><span class="o">.</span><span class="n">M4</span><span class="o">.</span><span class="n">Axis</span><span class="o">.</span><span class="n">PlcToNc</span> <span class="p">:</span> <span class="n">PLCTONC_AXIS_REF</span> <span class="p">(</span><span class="mi">8566720</span> <span class="mi">1024</span><span class="p">)</span>
<span class="n">Main</span><span class="o">.</span><span class="n">M4</span><span class="o">.</span><span class="n">bBrakeRelease</span> <span class="p">:</span> <span class="n">BOOL</span> <span class="p">(</span><span class="mi">8575704</span> <span class="mi">8</span><span class="p">)</span>
<span class="n">Main</span><span class="o">.</span><span class="n">M4</span><span class="o">.</span><span class="n">bHardwareEnable</span> <span class="p">:</span> <span class="n">BOOL</span> <span class="p">(</span><span class="mi">8575712</span> <span class="mi">8</span><span class="p">)</span>
<span class="n">Main</span><span class="o">.</span><span class="n">M4</span><span class="o">.</span><span class="n">bHome</span> <span class="p">:</span> <span class="n">BOOL</span> <span class="p">(</span><span class="mi">8575696</span> <span class="mi">8</span><span class="p">)</span>
<span class="n">Main</span><span class="o">.</span><span class="n">M4</span><span class="o">.</span><span class="n">bLimitBackwardEnable</span> <span class="p">:</span> <span class="n">BOOL</span> <span class="p">(</span><span class="mi">8575688</span> <span class="mi">8</span><span class="p">)</span>
<span class="n">Main</span><span class="o">.</span><span class="n">M4</span><span class="o">.</span><span class="n">bLimitForwardEnable</span> <span class="p">:</span> <span class="n">BOOL</span> <span class="p">(</span><span class="mi">8575680</span> <span class="mi">8</span><span class="p">)</span>
<span class="n">Main</span><span class="o">.</span><span class="n">M5</span> <span class="p">:</span> <span class="n">lcls_twincat_motion</span><span class="o">.</span><span class="n">DUT_MotionStage</span> <span class="p">(</span><span class="mi">8577920</span> <span class="mi">11264</span><span class="p">)</span>
<span class="n">Main</span><span class="o">.</span><span class="n">M5</span><span class="o">.</span><span class="n">Axis</span><span class="o">.</span><span class="n">NcToPlc</span> <span class="p">:</span> <span class="n">NCTOPLC_AXIS_REF</span> <span class="p">(</span><span class="mi">8579008</span> <span class="mi">2048</span><span class="p">)</span>
<span class="n">Main</span><span class="o">.</span><span class="n">M5</span><span class="o">.</span><span class="n">Axis</span><span class="o">.</span><span class="n">PlcToNc</span> <span class="p">:</span> <span class="n">PLCTONC_AXIS_REF</span> <span class="p">(</span><span class="mi">8577984</span> <span class="mi">1024</span><span class="p">)</span>
<span class="n">Main</span><span class="o">.</span><span class="n">M5</span><span class="o">.</span><span class="n">bBrakeRelease</span> <span class="p">:</span> <span class="n">BOOL</span> <span class="p">(</span><span class="mi">8586968</span> <span class="mi">8</span><span class="p">)</span>
<span class="n">Main</span><span class="o">.</span><span class="n">M5</span><span class="o">.</span><span class="n">bHardwareEnable</span> <span class="p">:</span> <span class="n">BOOL</span> <span class="p">(</span><span class="mi">8586976</span> <span class="mi">8</span><span class="p">)</span>
<span class="n">Main</span><span class="o">.</span><span class="n">M5</span><span class="o">.</span><span class="n">bHome</span> <span class="p">:</span> <span class="n">BOOL</span> <span class="p">(</span><span class="mi">8586960</span> <span class="mi">8</span><span class="p">)</span>
<span class="n">Main</span><span class="o">.</span><span class="n">M5</span><span class="o">.</span><span class="n">bLimitBackwardEnable</span> <span class="p">:</span> <span class="n">BOOL</span> <span class="p">(</span><span class="mi">8586952</span> <span class="mi">8</span><span class="p">)</span>
<span class="n">Main</span><span class="o">.</span><span class="n">M5</span><span class="o">.</span><span class="n">bLimitForwardEnable</span> <span class="p">:</span> <span class="n">BOOL</span> <span class="p">(</span><span class="mi">8586944</span> <span class="mi">8</span><span class="p">)</span>
<span class="n">Main</span><span class="o">.</span><span class="n">M6</span> <span class="p">:</span> <span class="n">lcls_twincat_motion</span><span class="o">.</span><span class="n">DUT_MotionStage</span> <span class="p">(</span><span class="mi">8589184</span> <span class="mi">11264</span><span class="p">)</span>
<span class="n">Main</span><span class="o">.</span><span class="n">M6</span><span class="o">.</span><span class="n">Axis</span><span class="o">.</span><span class="n">NcToPlc</span> <span class="p">:</span> <span class="n">NCTOPLC_AXIS_REF</span> <span class="p">(</span><span class="mi">8590272</span> <span class="mi">2048</span><span class="p">)</span>
<span class="n">Main</span><span class="o">.</span><span class="n">M6</span><span class="o">.</span><span class="n">Axis</span><span class="o">.</span><span class="n">PlcToNc</span> <span class="p">:</span> <span class="n">PLCTONC_AXIS_REF</span> <span class="p">(</span><span class="mi">8589248</span> <span class="mi">1024</span><span class="p">)</span>
<span class="n">Main</span><span class="o">.</span><span class="n">M6</span><span class="o">.</span><span class="n">bBrakeRelease</span> <span class="p">:</span> <span class="n">BOOL</span> <span class="p">(</span><span class="mi">8598232</span> <span class="mi">8</span><span class="p">)</span>
<span class="n">Main</span><span class="o">.</span><span class="n">M6</span><span class="o">.</span><span class="n">bHardwareEnable</span> <span class="p">:</span> <span class="n">BOOL</span> <span class="p">(</span><span class="mi">8598240</span> <span class="mi">8</span><span class="p">)</span>
<span class="n">Main</span><span class="o">.</span><span class="n">M6</span><span class="o">.</span><span class="n">bHome</span> <span class="p">:</span> <span class="n">BOOL</span> <span class="p">(</span><span class="mi">8598224</span> <span class="mi">8</span><span class="p">)</span>
<span class="n">Main</span><span class="o">.</span><span class="n">M6</span><span class="o">.</span><span class="n">bLimitBackwardEnable</span> <span class="p">:</span> <span class="n">BOOL</span> <span class="p">(</span><span class="mi">8598216</span> <span class="mi">8</span><span class="p">)</span>
<span class="n">Main</span><span class="o">.</span><span class="n">M6</span><span class="o">.</span><span class="n">bLimitForwardEnable</span> <span class="p">:</span> <span class="n">BOOL</span> <span class="p">(</span><span class="mi">8598208</span> <span class="mi">8</span><span class="p">)</span>
<span class="n">Main</span><span class="o">.</span><span class="n">TESTWithBender</span> <span class="p">:</span> <span class="n">DUT_HOMS</span> <span class="p">(</span><span class="mi">8512192</span> <span class="mi">20672</span><span class="p">)</span>
<span class="n">Main</span><span class="o">.</span><span class="n">TESTWithBender</span><span class="o">.</span><span class="n">fbRunHOMS</span><span class="o">.</span><span class="n">bSTOEnable1</span> <span class="p">:</span> <span class="n">BOOL</span> <span class="p">(</span><span class="mi">8513120</span> <span class="mi">8</span><span class="p">)</span>
<span class="n">Main</span><span class="o">.</span><span class="n">TESTWithBender</span><span class="o">.</span><span class="n">fbRunHOMS</span><span class="o">.</span><span class="n">bSTOEnable2</span> <span class="p">:</span> <span class="n">BOOL</span> <span class="p">(</span><span class="mi">8513128</span> <span class="mi">8</span><span class="p">)</span>
<span class="n">Main</span><span class="o">.</span><span class="n">TESTWithBender</span><span class="o">.</span><span class="n">fbRunHOMS</span><span class="o">.</span><span class="n">fbAutoCoupleX</span><span class="o">.</span><span class="n">gantry_diff_limit</span><span class="o">.</span><span class="n">PEnc</span><span class="o">.</span><span class="n">Count</span> <span class="p">:</span> <span class="n">ULINT</span> <span class="p">(</span><span class="mi">8523584</span> <span class="mi">64</span><span class="p">)</span>
<span class="n">Main</span><span class="o">.</span><span class="n">TESTWithBender</span><span class="o">.</span><span class="n">fbRunHOMS</span><span class="o">.</span><span class="n">fbAutoCoupleX</span><span class="o">.</span><span class="n">gantry_diff_limit</span><span class="o">.</span><span class="n">SEnc</span><span class="o">.</span><span class="n">Count</span> <span class="p">:</span> <span class="n">ULINT</span> <span class="p">(</span><span class="mi">8523712</span> <span class="mi">64</span><span class="p">)</span>
<span class="n">Main</span><span class="o">.</span><span class="n">TESTWithBender</span><span class="o">.</span><span class="n">fbRunHOMS</span><span class="o">.</span><span class="n">fbAutoCoupleY</span><span class="o">.</span><span class="n">gantry_diff_limit</span><span class="o">.</span><span class="n">PEnc</span><span class="o">.</span><span class="n">Count</span> <span class="p">:</span> <span class="n">ULINT</span> <span class="p">(</span><span class="mi">8514112</span> <span class="mi">64</span><span class="p">)</span>
<span class="n">Main</span><span class="o">.</span><span class="n">TESTWithBender</span><span class="o">.</span><span class="n">fbRunHOMS</span><span class="o">.</span><span class="n">fbAutoCoupleY</span><span class="o">.</span><span class="n">gantry_diff_limit</span><span class="o">.</span><span class="n">SEnc</span><span class="o">.</span><span class="n">Count</span> <span class="p">:</span> <span class="n">ULINT</span> <span class="p">(</span><span class="mi">8514240</span> <span class="mi">64</span><span class="p">)</span>
<span class="n">Main</span><span class="o">.</span><span class="n">TESTWithBender</span><span class="o">.</span><span class="n">fbRunHOMS</span><span class="o">.</span><span class="n">stXdwnEnc</span> <span class="p">:</span> <span class="n">lcls_twincat_motion</span><span class="o">.</span><span class="n">ST_RenishawAbsEnc</span> <span class="p">(</span><span class="mi">8513536</span> <span class="mi">128</span><span class="p">)</span>
<span class="n">Main</span><span class="o">.</span><span class="n">TESTWithBender</span><span class="o">.</span><span class="n">fbRunHOMS</span><span class="o">.</span><span class="n">stXupEnc</span> <span class="p">:</span> <span class="n">lcls_twincat_motion</span><span class="o">.</span><span class="n">ST_RenishawAbsEnc</span> <span class="p">(</span><span class="mi">8513408</span> <span class="mi">128</span><span class="p">)</span>
<span class="n">Main</span><span class="o">.</span><span class="n">TESTWithBender</span><span class="o">.</span><span class="n">fbRunHOMS</span><span class="o">.</span><span class="n">stYdwnEnc</span> <span class="p">:</span> <span class="n">lcls_twincat_motion</span><span class="o">.</span><span class="n">ST_RenishawAbsEnc</span> <span class="p">(</span><span class="mi">8513280</span> <span class="mi">128</span><span class="p">)</span>
<span class="n">Main</span><span class="o">.</span><span class="n">TESTWithBender</span><span class="o">.</span><span class="n">fbRunHOMS</span><span class="o">.</span><span class="n">stYupEnc</span> <span class="p">:</span> <span class="n">lcls_twincat_motion</span><span class="o">.</span><span class="n">ST_RenishawAbsEnc</span> <span class="p">(</span><span class="mi">8513152</span> <span class="mi">128</span><span class="p">)</span>
<span class="n">Main</span><span class="o">.</span><span class="n">fbBender</span> <span class="p">:</span> <span class="n">FB_Bender</span> <span class="p">(</span><span class="mi">8600448</span> <span class="mi">128</span><span class="p">)</span>
<span class="n">Main</span><span class="o">.</span><span class="n">fbMotionStage_m1</span> <span class="p">:</span> <span class="n">lcls_twincat_motion</span><span class="o">.</span><span class="n">FB_MotionStage</span> <span class="p">(</span><span class="mi">8600576</span> <span class="mi">152576</span><span class="p">)</span>
<span class="n">Main</span><span class="o">.</span><span class="n">fbMotionStage_m1</span><span class="o">.</span><span class="n">fbDriveVirtual</span><span class="o">.</span><span class="n">MasterAxis</span><span class="o">.</span><span class="n">NcToPlc</span> <span class="p">:</span> <span class="n">NCTOPLC_AXIS_REF</span> <span class="p">(</span><span class="mi">8603072</span> <span class="mi">2048</span><span class="p">)</span>
<span class="n">Main</span><span class="o">.</span><span class="n">fbMotionStage_m1</span><span class="o">.</span><span class="n">fbDriveVirtual</span><span class="o">.</span><span class="n">MasterAxis</span><span class="o">.</span><span class="n">PlcToNc</span> <span class="p">:</span> <span class="n">PLCTONC_AXIS_REF</span> <span class="p">(</span><span class="mi">8602048</span> <span class="mi">1024</span><span class="p">)</span>
<span class="n">Main</span><span class="o">.</span><span class="n">fbMotionStage_m2</span> <span class="p">:</span> <span class="n">lcls_twincat_motion</span><span class="o">.</span><span class="n">FB_MotionStage</span> <span class="p">(</span><span class="mi">8753152</span> <span class="mi">152576</span><span class="p">)</span>
<span class="n">Main</span><span class="o">.</span><span class="n">fbMotionStage_m2</span><span class="o">.</span><span class="n">fbDriveVirtual</span><span class="o">.</span><span class="n">MasterAxis</span><span class="o">.</span><span class="n">NcToPlc</span> <span class="p">:</span> <span class="n">NCTOPLC_AXIS_REF</span> <span class="p">(</span><span class="mi">8755648</span> <span class="mi">2048</span><span class="p">)</span>
<span class="n">Main</span><span class="o">.</span><span class="n">fbMotionStage_m2</span><span class="o">.</span><span class="n">fbDriveVirtual</span><span class="o">.</span><span class="n">MasterAxis</span><span class="o">.</span><span class="n">PlcToNc</span> <span class="p">:</span> <span class="n">PLCTONC_AXIS_REF</span> <span class="p">(</span><span class="mi">8754624</span> <span class="mi">1024</span><span class="p">)</span>
<span class="n">Main</span><span class="o">.</span><span class="n">fbMotionStage_m3</span> <span class="p">:</span> <span class="n">lcls_twincat_motion</span><span class="o">.</span><span class="n">FB_MotionStage</span> <span class="p">(</span><span class="mi">8905728</span> <span class="mi">152576</span><span class="p">)</span>
<span class="n">Main</span><span class="o">.</span><span class="n">fbMotionStage_m3</span><span class="o">.</span><span class="n">fbDriveVirtual</span><span class="o">.</span><span class="n">MasterAxis</span><span class="o">.</span><span class="n">NcToPlc</span> <span class="p">:</span> <span class="n">NCTOPLC_AXIS_REF</span> <span class="p">(</span><span class="mi">8908224</span> <span class="mi">2048</span><span class="p">)</span>
<span class="n">Main</span><span class="o">.</span><span class="n">fbMotionStage_m3</span><span class="o">.</span><span class="n">fbDriveVirtual</span><span class="o">.</span><span class="n">MasterAxis</span><span class="o">.</span><span class="n">PlcToNc</span> <span class="p">:</span> <span class="n">PLCTONC_AXIS_REF</span> <span class="p">(</span><span class="mi">8907200</span> <span class="mi">1024</span><span class="p">)</span>
<span class="n">Main</span><span class="o">.</span><span class="n">fbMotionStage_m4</span> <span class="p">:</span> <span class="n">lcls_twincat_motion</span><span class="o">.</span><span class="n">FB_MotionStage</span> <span class="p">(</span><span class="mi">9058304</span> <span class="mi">152576</span><span class="p">)</span>
<span class="n">Main</span><span class="o">.</span><span class="n">fbMotionStage_m4</span><span class="o">.</span><span class="n">fbDriveVirtual</span><span class="o">.</span><span class="n">MasterAxis</span><span class="o">.</span><span class="n">NcToPlc</span> <span class="p">:</span> <span class="n">NCTOPLC_AXIS_REF</span> <span class="p">(</span><span class="mi">9060800</span> <span class="mi">2048</span><span class="p">)</span>
<span class="n">Main</span><span class="o">.</span><span class="n">fbMotionStage_m4</span><span class="o">.</span><span class="n">fbDriveVirtual</span><span class="o">.</span><span class="n">MasterAxis</span><span class="o">.</span><span class="n">PlcToNc</span> <span class="p">:</span> <span class="n">PLCTONC_AXIS_REF</span> <span class="p">(</span><span class="mi">9059776</span> <span class="mi">1024</span><span class="p">)</span>
<span class="n">Main</span><span class="o">.</span><span class="n">fbMotionStage_m6</span> <span class="p">:</span> <span class="n">lcls_twincat_motion</span><span class="o">.</span><span class="n">FB_MotionStage</span> <span class="p">(</span><span class="mi">9210880</span> <span class="mi">152576</span><span class="p">)</span>
<span class="n">Main</span><span class="o">.</span><span class="n">fbMotionStage_m6</span><span class="o">.</span><span class="n">fbDriveVirtual</span><span class="o">.</span><span class="n">MasterAxis</span><span class="o">.</span><span class="n">NcToPlc</span> <span class="p">:</span> <span class="n">NCTOPLC_AXIS_REF</span> <span class="p">(</span><span class="mi">9213376</span> <span class="mi">2048</span><span class="p">)</span>
<span class="n">Main</span><span class="o">.</span><span class="n">fbMotionStage_m6</span><span class="o">.</span><span class="n">fbDriveVirtual</span><span class="o">.</span><span class="n">MasterAxis</span><span class="o">.</span><span class="n">PlcToNc</span> <span class="p">:</span> <span class="n">PLCTONC_AXIS_REF</span> <span class="p">(</span><span class="mi">9212352</span> <span class="mi">1024</span><span class="p">)</span>
<span class="n">ParameterList</span><span class="o">.</span><span class="n">cSourceNameSize</span> <span class="p">:</span> <span class="n">UDINT</span> <span class="p">(</span><span class="mi">4339968</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">TC_EVENTS</span><span class="o">.</span><span class="n">LCLSGeneralEventClass</span> <span class="p">:</span> <span class="n">ST_LCLSGeneralEventClass</span> <span class="p">(</span><span class="mi">9416512</span> <span class="mi">960</span><span class="p">)</span>
<span class="n">TwinCAT_LicenseInfoVarList</span><span class="o">.</span><span class="n">_LicenseInfo</span> <span class="p">:</span> <span class="n">ARRAY</span><span class="p">[</span><span class="mf">1.</span><span class="o">.</span><span class="mi">2</span><span class="p">]</span> <span class="n">OF</span> <span class="n">PlcLicenseInfo</span> <span class="p">(</span><span class="mi">9367232</span> <span class="mi">2048</span><span class="p">)</span>
<span class="n">TwinCAT_SystemInfoVarList</span><span class="o">.</span><span class="n">_AppInfo</span> <span class="p">:</span> <span class="n">PlcAppSystemInfo</span> <span class="p">(</span><span class="mi">9369280</span> <span class="mi">2048</span><span class="p">)</span>
<span class="n">TwinCAT_SystemInfoVarList</span><span class="o">.</span><span class="n">_TaskInfo</span> <span class="p">:</span> <span class="n">ARRAY</span><span class="p">[</span><span class="mf">1.</span><span class="o">.</span><span class="mi">1</span><span class="p">]</span> <span class="n">OF</span> <span class="n">PlcTaskSystemInfo</span> <span class="p">(</span><span class="mi">9371328</span> <span class="mi">1024</span><span class="p">)</span>
<span class="n">TwinCAT_SystemInfoVarList</span><span class="o">.</span><span class="n">_TaskOid_PlcTask</span> <span class="p">:</span> <span class="n">OTCID</span> <span class="p">(</span><span class="mi">9372384</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">TwinCAT_SystemInfoVarList</span><span class="o">.</span><span class="n">_TaskPouOid_PlcTask</span> <span class="p">:</span> <span class="n">OTCID</span> <span class="p">(</span><span class="mi">9372352</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">TwinCAT_SystemInfoVarList</span><span class="o">.</span><span class="n">__PlcTask</span> <span class="p">:</span> <span class="n">_Implicit_Task_Info</span> <span class="p">(</span><span class="mi">9372416</span> <span class="mi">704</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="boxes">
<h2>Boxes<a class="headerlink" href="#boxes" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="nc-axes">
<h2>NC axes<a class="headerlink" href="#nc-axes" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mf">1.</span><span class="p">)</span> <span class="s1">&#39;Axis 1&#39;</span><span class="p">:</span>
    <span class="n">Id</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">CreateSymbols</span> <span class="o">=</span> <span class="s1">&#39;true&#39;</span>
    <span class="n">AxisType</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">OtherSettings</span><span class="p">:</span><span class="n">AllowMotionCmdToSlave</span> <span class="o">=</span> <span class="s1">&#39;true&#39;</span>
    <span class="n">Enc</span><span class="p">:</span><span class="n">EncType</span> <span class="o">=</span> <span class="mi">1</span>

<span class="mf">2.</span><span class="p">)</span> <span class="s1">&#39;TestPitch_LimitSwitches&#39;</span><span class="p">:</span>
    <span class="n">Id</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">CreateSymbols</span> <span class="o">=</span> <span class="s1">&#39;true&#39;</span>
    <span class="n">AxisType</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">AxisFolder</span> <span class="o">=</span> <span class="s1">&#39;TestAxes&#39;</span>
    <span class="n">OtherSettings</span><span class="p">:</span><span class="n">AllowMotionCmdToSlave</span> <span class="o">=</span> <span class="s1">&#39;true&#39;</span>
    <span class="n">Enc</span><span class="p">:</span><span class="n">EncType</span> <span class="o">=</span> <span class="mi">1</span>

<span class="mf">3.</span><span class="p">)</span> <span class="s1">&#39;Axis 2&#39;</span><span class="p">:</span>
    <span class="n">Id</span> <span class="o">=</span> <span class="mi">3</span>
    <span class="n">CreateSymbols</span> <span class="o">=</span> <span class="s1">&#39;true&#39;</span>
    <span class="n">AxisType</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">OtherSettings</span><span class="p">:</span><span class="n">AllowMotionCmdToSlave</span> <span class="o">=</span> <span class="s1">&#39;true&#39;</span>
    <span class="n">Enc</span><span class="p">:</span><span class="n">EncType</span> <span class="o">=</span> <span class="mi">1</span>

<span class="mf">4.</span><span class="p">)</span> <span class="s1">&#39;Axis 3&#39;</span><span class="p">:</span>
    <span class="n">Id</span> <span class="o">=</span> <span class="mi">4</span>
    <span class="n">CreateSymbols</span> <span class="o">=</span> <span class="s1">&#39;true&#39;</span>
    <span class="n">AxisType</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">OtherSettings</span><span class="p">:</span><span class="n">AllowMotionCmdToSlave</span> <span class="o">=</span> <span class="s1">&#39;true&#39;</span>
    <span class="n">Enc</span><span class="p">:</span><span class="n">EncType</span> <span class="o">=</span> <span class="mi">1</span>

<span class="mf">5.</span><span class="p">)</span> <span class="s1">&#39;Axis 4&#39;</span><span class="p">:</span>
    <span class="n">Id</span> <span class="o">=</span> <span class="mi">5</span>
    <span class="n">CreateSymbols</span> <span class="o">=</span> <span class="s1">&#39;true&#39;</span>
    <span class="n">AxisType</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">OtherSettings</span><span class="p">:</span><span class="n">AllowMotionCmdToSlave</span> <span class="o">=</span> <span class="s1">&#39;true&#39;</span>
    <span class="n">Enc</span><span class="p">:</span><span class="n">EncType</span> <span class="o">=</span> <span class="mi">1</span>

<span class="mf">6.</span><span class="p">)</span> <span class="s1">&#39;Axis 5&#39;</span><span class="p">:</span>
    <span class="n">Id</span> <span class="o">=</span> <span class="mi">6</span>
    <span class="n">CreateSymbols</span> <span class="o">=</span> <span class="s1">&#39;true&#39;</span>
    <span class="n">AxisType</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">OtherSettings</span><span class="p">:</span><span class="n">AllowMotionCmdToSlave</span> <span class="o">=</span> <span class="s1">&#39;true&#39;</span>
    <span class="n">Enc</span><span class="p">:</span><span class="n">EncType</span> <span class="o">=</span> <span class="mi">1</span>

<span class="mf">7.</span><span class="p">)</span> <span class="s1">&#39;Axis 6&#39;</span><span class="p">:</span>
    <span class="n">Id</span> <span class="o">=</span> <span class="mi">7</span>
    <span class="n">CreateSymbols</span> <span class="o">=</span> <span class="s1">&#39;true&#39;</span>
    <span class="n">AxisType</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">OtherSettings</span><span class="p">:</span><span class="n">AllowMotionCmdToSlave</span> <span class="o">=</span> <span class="s1">&#39;true&#39;</span>
    <span class="n">Enc</span><span class="p">:</span><span class="n">EncType</span> <span class="o">=</span> <span class="mi">1</span>
</pre></div>
</div>
</div>
<div class="section" id="links">
<h2>Links<a class="headerlink" href="#links" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mf">1.</span><span class="p">)</span> <span class="n">A</span> <span class="p">(</span><span class="s1">&#39;lcls_twincat_optics_plc Instance&#39;</span><span class="p">,</span> <span class="s1">&#39;PlcTask Inputs^Main.M1.Axis.NcToPlc&#39;</span><span class="p">)</span>
      <span class="n">B</span> <span class="p">(</span><span class="s1">&#39;TINC^NC-Task 1 SAF^Axes^Axis 1&#39;</span><span class="p">,</span> <span class="s1">&#39;Outputs^ToPlc&#39;</span><span class="p">)</span>
<span class="mf">2.</span><span class="p">)</span> <span class="n">A</span> <span class="p">(</span><span class="s1">&#39;lcls_twincat_optics_plc Instance&#39;</span><span class="p">,</span> <span class="s1">&#39;PlcTask Outputs^Main.M1.Axis.PlcToNc&#39;</span><span class="p">)</span>
      <span class="n">B</span> <span class="p">(</span><span class="s1">&#39;TINC^NC-Task 1 SAF^Axes^Axis 1&#39;</span><span class="p">,</span> <span class="s1">&#39;Inputs^FromPlc&#39;</span><span class="p">)</span>
<span class="mf">3.</span><span class="p">)</span> <span class="n">A</span> <span class="p">(</span><span class="s1">&#39;lcls_twincat_optics_plc Instance&#39;</span><span class="p">,</span> <span class="s1">&#39;PlcTask Inputs^Main.M2.Axis.NcToPlc&#39;</span><span class="p">)</span>
      <span class="n">B</span> <span class="p">(</span><span class="s1">&#39;TINC^NC-Task 1 SAF^Axes^Axis 2&#39;</span><span class="p">,</span> <span class="s1">&#39;Outputs^ToPlc&#39;</span><span class="p">)</span>
<span class="mf">4.</span><span class="p">)</span> <span class="n">A</span> <span class="p">(</span><span class="s1">&#39;lcls_twincat_optics_plc Instance&#39;</span><span class="p">,</span> <span class="s1">&#39;PlcTask Outputs^Main.M2.Axis.PlcToNc&#39;</span><span class="p">)</span>
      <span class="n">B</span> <span class="p">(</span><span class="s1">&#39;TINC^NC-Task 1 SAF^Axes^Axis 2&#39;</span><span class="p">,</span> <span class="s1">&#39;Inputs^FromPlc&#39;</span><span class="p">)</span>
<span class="mf">5.</span><span class="p">)</span> <span class="n">A</span> <span class="p">(</span><span class="s1">&#39;lcls_twincat_optics_plc Instance&#39;</span><span class="p">,</span> <span class="s1">&#39;PlcTask Inputs^Main.M3.Axis.NcToPlc&#39;</span><span class="p">)</span>
      <span class="n">B</span> <span class="p">(</span><span class="s1">&#39;TINC^NC-Task 1 SAF^Axes^Axis 3&#39;</span><span class="p">,</span> <span class="s1">&#39;Outputs^ToPlc&#39;</span><span class="p">)</span>
<span class="mf">6.</span><span class="p">)</span> <span class="n">A</span> <span class="p">(</span><span class="s1">&#39;lcls_twincat_optics_plc Instance&#39;</span><span class="p">,</span> <span class="s1">&#39;PlcTask Outputs^Main.M3.Axis.PlcToNc&#39;</span><span class="p">)</span>
      <span class="n">B</span> <span class="p">(</span><span class="s1">&#39;TINC^NC-Task 1 SAF^Axes^Axis 3&#39;</span><span class="p">,</span> <span class="s1">&#39;Inputs^FromPlc&#39;</span><span class="p">)</span>
<span class="mf">7.</span><span class="p">)</span> <span class="n">A</span> <span class="p">(</span><span class="s1">&#39;lcls_twincat_optics_plc Instance&#39;</span><span class="p">,</span> <span class="s1">&#39;PlcTask Inputs^Main.M4.Axis.NcToPlc&#39;</span><span class="p">)</span>
      <span class="n">B</span> <span class="p">(</span><span class="s1">&#39;TINC^NC-Task 1 SAF^Axes^Axis 4&#39;</span><span class="p">,</span> <span class="s1">&#39;Outputs^ToPlc&#39;</span><span class="p">)</span>
<span class="mf">8.</span><span class="p">)</span> <span class="n">A</span> <span class="p">(</span><span class="s1">&#39;lcls_twincat_optics_plc Instance&#39;</span><span class="p">,</span> <span class="s1">&#39;PlcTask Outputs^Main.M4.Axis.PlcToNc&#39;</span><span class="p">)</span>
      <span class="n">B</span> <span class="p">(</span><span class="s1">&#39;TINC^NC-Task 1 SAF^Axes^Axis 4&#39;</span><span class="p">,</span> <span class="s1">&#39;Inputs^FromPlc&#39;</span><span class="p">)</span>
<span class="mf">9.</span><span class="p">)</span> <span class="n">A</span> <span class="p">(</span><span class="s1">&#39;lcls_twincat_optics_plc Instance&#39;</span><span class="p">,</span> <span class="s1">&#39;PlcTask Inputs^Main.M5.Axis.NcToPlc&#39;</span><span class="p">)</span>
      <span class="n">B</span> <span class="p">(</span><span class="s1">&#39;TINC^NC-Task 1 SAF^Axes^Axis 5&#39;</span><span class="p">,</span> <span class="s1">&#39;Outputs^ToPlc&#39;</span><span class="p">)</span>
<span class="mf">10.</span><span class="p">)</span> <span class="n">A</span> <span class="p">(</span><span class="s1">&#39;lcls_twincat_optics_plc Instance&#39;</span><span class="p">,</span> <span class="s1">&#39;PlcTask Outputs^Main.M5.Axis.PlcToNc&#39;</span><span class="p">)</span>
      <span class="n">B</span> <span class="p">(</span><span class="s1">&#39;TINC^NC-Task 1 SAF^Axes^Axis 5&#39;</span><span class="p">,</span> <span class="s1">&#39;Inputs^FromPlc&#39;</span><span class="p">)</span>
<span class="mf">11.</span><span class="p">)</span> <span class="n">A</span> <span class="p">(</span><span class="s1">&#39;lcls_twincat_optics_plc Instance&#39;</span><span class="p">,</span> <span class="s1">&#39;PlcTask Inputs^Main.M6.Axis.NcToPlc&#39;</span><span class="p">)</span>
      <span class="n">B</span> <span class="p">(</span><span class="s1">&#39;TINC^NC-Task 1 SAF^Axes^Axis 6&#39;</span><span class="p">,</span> <span class="s1">&#39;Outputs^ToPlc&#39;</span><span class="p">)</span>
<span class="mf">12.</span><span class="p">)</span> <span class="n">A</span> <span class="p">(</span><span class="s1">&#39;lcls_twincat_optics_plc Instance&#39;</span><span class="p">,</span> <span class="s1">&#39;PlcTask Outputs^Main.M6.Axis.PlcToNc&#39;</span><span class="p">)</span>
      <span class="n">B</span> <span class="p">(</span><span class="s1">&#39;TINC^NC-Task 1 SAF^Axes^Axis 6&#39;</span><span class="p">,</span> <span class="s1">&#39;Inputs^FromPlc&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="pragma-lint-results">
<h2>Pragma lint results<a class="headerlink" href="#pragma-lint-results" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">INFO</span><span class="p">:</span><span class="n">pytmc</span><span class="o">.</span><span class="n">bin</span><span class="o">.</span><span class="n">pragmalint</span><span class="p">:</span><span class="n">Total</span> <span class="n">pragmas</span> <span class="n">found</span><span class="p">:</span> <span class="mi">22</span> <span class="n">Total</span> <span class="n">linter</span> <span class="n">errors</span><span class="p">:</span> <span class="mi">0</span>
<span class="n">PLC</span> <span class="n">Project</span> <span class="p">(</span><span class="mi">1</span><span class="p">):</span> <span class="n">lcls_twincat_optics_plc</span>
<span class="o">========================================</span>


<span class="n">DUTs</span><span class="o">/</span><span class="n">DUT_HOMS</span><span class="o">.</span><span class="n">TcDUT</span> <span class="p">(</span><span class="n">TcPlcObject</span><span class="p">)</span>
<span class="o">---------------------------------</span>

    <span class="o">-</span> <span class="n">DUT_HOMS</span><span class="p">:</span> <span class="n">Declaration</span> <span class="o">-</span> <span class="mi">8</span> <span class="n">pragmas</span>


<span class="n">GVLs</span><span class="o">/</span><span class="n">GVL_Constants</span><span class="o">.</span><span class="n">TcGVL</span> <span class="p">(</span><span class="n">TcPlcObject</span><span class="p">)</span>
<span class="o">--------------------------------------</span>

    <span class="o">-</span> <span class="n">GVL_Constants</span><span class="p">:</span> <span class="n">Declaration</span> <span class="o">-</span> <span class="mi">1</span> <span class="n">pragmas</span>


<span class="n">GVLs</span><span class="o">/</span><span class="n">GVL_TestStructs</span><span class="o">.</span><span class="n">TcGVL</span> <span class="p">(</span><span class="n">TcPlcObject</span><span class="p">)</span>
<span class="o">----------------------------------------</span>

    <span class="o">-</span> <span class="n">GVL_TestStructs</span><span class="p">:</span> <span class="n">Declaration</span> <span class="o">-</span> <span class="mi">1</span> <span class="n">pragmas</span>


<span class="n">POUs</span><span class="o">/</span><span class="n">FB_PitchControl</span><span class="o">.</span><span class="n">TcPOU</span> <span class="p">(</span><span class="n">TcPlcObject</span><span class="p">)</span>
<span class="o">----------------------------------------</span>

    <span class="o">-</span> <span class="n">FB_PitchControl</span><span class="p">:</span> <span class="n">Declaration</span> <span class="o">-</span> <span class="mi">2</span> <span class="n">pragmas</span>


<span class="n">POUs</span><span class="o">/</span><span class="n">FB_RMSWatch</span><span class="o">.</span><span class="n">TcPOU</span> <span class="p">(</span><span class="n">TcPlcObject</span><span class="p">)</span>
<span class="o">------------------------------------</span>

    <span class="o">-</span> <span class="n">FB_RMSWatch</span><span class="p">:</span> <span class="n">Declaration</span> <span class="o">-</span> <span class="mi">5</span> <span class="n">pragmas</span>


<span class="n">POUs</span><span class="o">/</span><span class="n">Tests</span><span class="o">/</span><span class="n">TEST_PitchControl</span><span class="o">.</span><span class="n">TcPOU</span> <span class="p">(</span><span class="n">TcPlcObject</span><span class="p">)</span>
<span class="o">------------------------------------------------</span>

    <span class="o">-</span> <span class="n">TEST_PitchControl</span><span class="p">:</span> <span class="n">Declaration</span> <span class="o">-</span> <span class="mi">1</span> <span class="n">pragmas</span>


<span class="n">Version</span><span class="o">/</span><span class="n">Global_Version</span><span class="o">.</span><span class="n">TcGVL</span> <span class="p">(</span><span class="n">TcPlcObject</span><span class="p">)</span>
<span class="o">------------------------------------------</span>

    <span class="o">-</span> <span class="n">Global_Version</span><span class="p">:</span> <span class="n">Declaration</span> <span class="o">-</span> <span class="mi">4</span> <span class="n">pragmas</span>
</pre></div>
</div>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">pcdshub/lcls-twincat-optics</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">PLC Project (1): lcls_twincat_optics_plc</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#dut-dut-homs">DUT: DUT_HOMS</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dut-e-piezocontrol">DUT: E_PiezoControl</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dut-e-pitchcontrol">DUT: E_PitchControl</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dut-homs-pitchmechanism">DUT: HOMS_PitchMechanism</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dut-st-piezoaxis">DUT: ST_PiezoAxis</a></li>
<li class="toctree-l2"><a class="reference internal" href="#gvl-gvl-constants">GVL: GVL_Constants</a></li>
<li class="toctree-l2"><a class="reference internal" href="#gvl-gvl-teststructs">GVL: GVL_TestStructs</a></li>
<li class="toctree-l2"><a class="reference internal" href="#gvl-global-version">GVL: Global_Version</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pou-fb-bender">POU: FB_Bender</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pou-fb-pi-e621-serialdriver">POU: FB_PI_E621_SerialDriver</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pou-fb-pi-e621-serialtransaction">POU: FB_PI_E621_SerialTransaction</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pou-fb-piezocontrol">POU: FB_PiezoControl</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pou-fb-pitchcontrol">POU: FB_PitchControl</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pou-fb-rmswatch">POU: FB_RMSWatch</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pou-fb-runhoms">POU: FB_RunHOMS</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pou-mc-smoothmover">POU: MC_SmoothMover</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pou-main">POU: Main</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pou-test-pitchcontrol">POU: TEST_PitchControl</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pou-withinrange">POU: WithinRange</a></li>
<li class="toctree-l2"><a class="reference internal" href="#symbols">Symbols</a></li>
<li class="toctree-l2"><a class="reference internal" href="#boxes">Boxes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#nc-axes">NC axes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#links">Links</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pragma-lint-results">Pragma lint results</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="lcls_twincat_optics_plc.tmc.html">lcls_twincat_optics_plc.tmc</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="index.html" title="previous chapter">Welcome to pcdshub/lcls-twincat-optics’s documentation!</a></li>
      <li>Next: <a href="lcls_twincat_optics_plc.tmc.html" title="next chapter">lcls_twincat_optics_plc.tmc</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, SLAC National Accelerator Laboratory.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.1.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/lcls-twincat-optics.tsproj.md.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>